{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { ColorPalette } from \"../../../theme/colors\";\nimport Images from \"../../../theme/images\";\nimport EmptyView from \"../../components/EmptyView\";\nimport PageHeader from \"../../components/global/header\";\nimport LoadingOverlay from \"../../components/LoadingOverlay\";\nimport SafeArea from \"../../components/global/safeArea\";\nimport useLiked from \"../../../hooks/useLiked\";\nimport { useToast } from \"native-base\";\nimport ToastDialog from \"../../components/global/toast\";\nimport FriendCard from \"../../components/friendCard\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { createRoom } from \"../../../controller/message\";\nimport { UserContext } from \"../../../context/user\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar LikedScreen = function LikedScreen() {\n  var _useContext = useContext(UserContext),\n    profile = _useContext.profile;\n  var toast = useToast();\n  var navigation = useNavigation();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    filteredUsers = _useState2[0],\n    setFilteredUsers = _useState2[1];\n  var _useLiked = useLiked(function (error) {\n      toast.show({\n        render: function render() {\n          return _jsx(ToastDialog, {\n            message: error\n          });\n        }\n      });\n    }),\n    likedUsers = _useLiked.likedUsers,\n    loading = _useLiked.loading;\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    keyword = _useState4[0],\n    setKeyword = _useState4[1];\n  var onSearchUser = function onSearchUser(text) {\n    setKeyword(text);\n  };\n  var onCardClick = function () {\n    var _ref = _asyncToGenerator(function* (user) {\n      if (!profile) return;\n      var roomId = yield createRoom(profile, user, function (error) {\n        toast.show({\n          render: function render() {\n            return _jsx(ToastDialog, {\n              message: error\n            });\n          }\n        });\n      });\n      navigation.navigate(\"Chat\", {\n        screen: \"room\",\n        params: {\n          id: roomId,\n          name: user.name,\n          profilePic: user.profilePicture\n        }\n      });\n    });\n    return function onCardClick(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    if (keyword) {\n      var filtered = likedUsers.filter(function (user) {\n        var _user$name;\n        return (_user$name = user.name) == null ? void 0 : _user$name.toLowerCase().includes(keyword.toLowerCase());\n      });\n      setFilteredUsers(filtered);\n    } else {\n      setFilteredUsers(likedUsers);\n    }\n    if (likedUsers.length === 0) {\n      setFilteredUsers([]);\n    }\n  }, [likedUsers, keyword]);\n  return _jsxs(SafeArea, {\n    children: [_jsx(PageHeader, {}), _jsxs(View, {\n      style: styles.container,\n      children: [_jsxs(_StyledComponent, {\n        style: styles.searchWrapper,\n        className: \"bg-secondary\",\n        component: View,\n        children: [_jsx(Image, {\n          style: styles.searchIcon,\n          source: Images.icon_search\n        }), _jsx(_StyledComponent, {\n          style: styles.searchText,\n          className: \"text-onSecondary\",\n          placeholder: 'Search',\n          placeholderTextColor: ColorPalette.SOFT_MAGENTA,\n          value: keyword,\n          onChangeText: onSearchUser,\n          component: TextInput\n        })]\n      }), _jsx(_StyledComponent, {\n        style: styles.bannerText,\n        className: \"text-onSecondary\",\n        component: Text,\n        children: \"Liked People\"\n      }), filteredUsers && filteredUsers.length > 0 ? _jsx(FlatList, {\n        style: styles.listView,\n        data: filteredUsers,\n        keyExtractor: function keyExtractor(_item, index) {\n          return index.toString();\n        },\n        ListFooterComponent: function ListFooterComponent() {\n          return _jsx(View, {\n            style: {\n              height: 20\n            }\n          });\n        },\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item;\n          return _jsx(FriendCard, {\n            profilePicture: item.profilePicture,\n            personName: item.name,\n            onPress: function onPress() {\n              return onCardClick(item);\n            }\n          });\n        }\n      }) : _jsx(EmptyView, {\n        title: 'No liked people.'\n      }), loading && _jsx(LoadingOverlay, {})]\n    })]\n  });\n};\nexport default LikedScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 20\n  },\n  searchWrapper: {\n    marginVertical: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: 'white',\n    paddingHorizontal: 15,\n    paddingVertical: 5\n  },\n  searchIcon: {\n    width: 20,\n    height: 20\n  },\n  searchText: {\n    marginLeft: 15,\n    width: '100%',\n    fontSize: 20\n  },\n  bannerText: {\n    fontWeight: \"bold\",\n    fontSize: 22,\n    marginBottom: 10\n  },\n  listView: {\n    flex: 1\n  }\n});\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    },\n    \"flex\": {\n      \"display\": \"flex\"\n    },\n    \"bg-secondary\": {\n      \"backgroundColor\": \"#63458A\"\n    },\n    \"text-onSecondary\": {\n      \"color\": \"#FEE1FF\"\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  }\n});","map":{"version":3,"names":["useContext","useEffect","useState","ColorPalette","Images","EmptyView","PageHeader","LoadingOverlay","SafeArea","useLiked","useToast","ToastDialog","FriendCard","useNavigation","createRoom","UserContext","LikedScreen","profile","toast","navigation","filteredUsers","setFilteredUsers","error","show","render","likedUsers","loading","keyword","setKeyword","onSearchUser","text","onCardClick","user","roomId","navigate","screen","params","id","name","profilePic","profilePicture","filtered","filter","toLowerCase","includes","length","styles","container","searchWrapper","searchIcon","icon_search","searchText","SOFT_MAGENTA","bannerText","listView","_item","index","toString","height","item","StyleSheet","create","flex","paddingHorizontal","marginVertical","flexDirection","alignItems","borderRadius","borderWidth","borderColor","paddingVertical","width","marginLeft","fontSize","fontWeight","marginBottom"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/frontend/screens/home/LikedScreen.tsx"],"sourcesContent":["import {\n    StyleSheet, Text, \n    View, Image, \n    FlatList, TextInput\n} from 'react-native'\nimport { useContext, useEffect, useState } from \"react\";\nimport { ColorPalette } from \"@app/theme/colors\";\nimport Images from \"@app/theme/images\";\nimport EmptyView from \"@app/frontend/components/EmptyView\";\nimport PageHeader from '@app/frontend/components/global/header';\nimport LoadingOverlay from '@app/frontend/components/LoadingOverlay';\nimport SafeArea from '@app/frontend/components/global/safeArea';\nimport useLiked from '@app/hooks/useLiked';\nimport {useToast} from \"native-base\";\nimport ToastDialog from '@app/frontend/components/global/toast';\nimport type { User } from \"@app/shared/interfaces/user\";\nimport FriendCard from '@app/frontend/components/friendCard';\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"@app/frontend/navigation/main\";\nimport { createRoom } from \"@app/controller/message\";\nimport {UserContext} from \"@app/context/user\";\n\ntype NavigationProps = NativeStackNavigationProp<RootStackParamList, \"Like\">;\n\nconst LikedScreen = () => {\n    const {profile} = useContext(UserContext)\n    const toast = useToast();\n    const navigation = useNavigation<NavigationProps>();\n    const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\n    const {likedUsers, loading} = useLiked(\n        (error) => {\n            toast.show({\n                render: () => <ToastDialog message={error} />\n            })\n        }\n    );\n    const [keyword, setKeyword] = useState('');\n\n    const onSearchUser = (text: string) => {\n        setKeyword(text);\n    }\n\n    const onCardClick = async (user: User) =>  {\n        if (!profile) return;\n        const roomId = await createRoom(profile, user, (error) => {\n            toast.show({\n                render: () => <ToastDialog message={error} />\n            })\n        });\n        navigation.navigate(\"Chat\", {\n            screen: \"room\",\n            params: {\n                id: roomId,\n                name: user.name!,\n                profilePic: user.profilePicture!\n            }\n        });\n    }\n\n    useEffect(()=> {\n        if (keyword) {\n            const filtered: User[] = likedUsers.filter((user: User) => {\n                return user.name?.toLowerCase().includes(keyword.toLowerCase());\n            });\n            setFilteredUsers(filtered);\n        } else {\n            setFilteredUsers(likedUsers);\n        }\n\n        if (likedUsers.length === 0) {\n            setFilteredUsers([]);\n        }\n    }, [likedUsers, keyword]);\n\n    return (\n        <SafeArea>\n            <PageHeader/>\n            <View style={styles.container}>\n                <View style={styles.searchWrapper} className=\"bg-secondary\">\n                    <Image style={styles.searchIcon} source={Images.icon_search} />\n                    <TextInput\n                        style={styles.searchText}\n                        className=\"text-onSecondary\"\n                        placeholder={'Search'}\n                        placeholderTextColor={ColorPalette.SOFT_MAGENTA}\n                        value={keyword}\n                        onChangeText = {onSearchUser}\n                    />\n                </View>\n                <Text style={styles.bannerText} className=\"text-onSecondary\">Liked People</Text>\n                {filteredUsers && filteredUsers.length > 0 ? (\n                    <FlatList\n                        style={styles.listView}\n                        data={filteredUsers}\n                        keyExtractor={(_item, index) => index.toString()}\n                        ListFooterComponent={() => <View style={{ height: 20 }} />}\n                        renderItem={({ item }) => {\n                            return (\n                                <FriendCard\n                                    profilePicture={item.profilePicture!}\n                                    personName={item.name!}\n                                    onPress={() => onCardClick(item)}\n                                />\n                            );\n                        }}\n                    />\n                ) : (\n                    <EmptyView title={'No liked people.'} />\n                )}\n                {loading && <LoadingOverlay/>}\n            </View>\n        </SafeArea>\n    )\n}\n\nexport default LikedScreen;\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingHorizontal: 20\n    },\n    searchWrapper: {\n        marginVertical: 20,\n        flexDirection: 'row',\n        alignItems: 'center',\n        borderRadius: 20,\n        borderWidth: 1,\n        borderColor: 'white',\n        paddingHorizontal: 15,\n        paddingVertical: 5,\n    },\n    searchIcon: {\n        width: 20,\n        height: 20\n    },\n    searchText: {\n        marginLeft: 15,\n        width: '100%',\n        fontSize: 20\n    },\n    bannerText: {\n        fontWeight: \"bold\",\n        fontSize: 22,\n        marginBottom: 10\n    },\n    listView: {\n        flex: 1,\n    },\n    \n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}