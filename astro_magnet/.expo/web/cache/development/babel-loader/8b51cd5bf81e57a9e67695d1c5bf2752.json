{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { useEffect, useState, useContext, useRef } from \"react\";\nimport FastImage from \"../../components/global/image\";\nimport UserController from \"../../../controller/user\";\nimport { ColorPalette } from \"../../../theme/colors\";\nimport Images from \"../../../theme/images\";\nimport { UserContext } from \"../../../context/user\";\nimport LoadingOverlay from \"../../components/LoadingOverlay\";\nimport EmptyView from \"../../components/EmptyView\";\nimport useLooking from \"../../../hooks/useLooking\";\nimport { getAge } from \"../../../shared/actions/time\";\nimport { ScrollView, useToast } from 'native-base';\nimport ToastDialog from \"../../components/global/toast\";\nimport SafeArea from \"../../components/global/safeArea\";\nimport PageHeader from \"../../components/global/header\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar width = Dimensions.get('window').width;\nvar LookingScreen = function LookingScreen() {\n  var toast = useToast();\n  var _useContext = useContext(UserContext),\n    profile = _useContext.profile;\n  var count = useRef(0);\n  var _useLooking = useLooking(function (error) {\n      toast.show({\n        render: function render() {\n          return _jsx(ToastDialog, {\n            message: error\n          });\n        }\n      });\n    }),\n    users = _useLooking.users,\n    loading = _useLooking.loading;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLikeUpdating = _useState2[0],\n    setIsUpdating = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    activeUser = _useState4[0],\n    setActiveUser = _useState4[1];\n  useEffect(function () {\n    if (users.length > 0 && loading) {\n      setActiveUser(users[0]);\n    }\n  }, [users, loading]);\n  useEffect(function () {\n    if (isLikeUpdating) {\n      onNextUser();\n      setActiveUser(users[count.current]);\n      setIsUpdating(false);\n    }\n  }, [isLikeUpdating]);\n  useEffect(function () {\n    if (users.length === 0) {\n      setActiveUser(null);\n      count.current = 0;\n    } else if (users.length === 1 && !activeUser) {\n      setActiveUser(users[0]);\n    }\n  }, [users, activeUser]);\n  var onLike = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (activeUser) {\n        setIsUpdating(true);\n        yield UserController.likeUser(profile == null ? void 0 : profile.id, activeUser.id);\n      }\n    });\n    return function onLike() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var onDislike = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (activeUser) {\n        setIsUpdating(true);\n        yield UserController.dislikeUser(profile == null ? void 0 : profile.id, activeUser.id);\n      }\n    });\n    return function onDislike() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var onNextUser = function onNextUser() {\n    if (count.current < users.length - 1) {\n      count.current++;\n      setActiveUser(users[count.current]);\n    } else {\n      setActiveUser(users[0]);\n      count.current = 0;\n    }\n  };\n  var onPrevUser = function onPrevUser() {\n    if (count.current > 0) {\n      count.current--;\n      setActiveUser(users[count.current]);\n    } else {\n      setActiveUser(users[users.length - 1]);\n      count.current = users.length - 1;\n    }\n  };\n  var toRad = function toRad(Value) {\n    return Value * Math.PI / 180;\n  };\n  var getCompatibility = function getCompatibility(user) {\n    if (profile && user) {\n      var lat1 = profile.lat;\n      var lng1 = profile.lng;\n      var lat2 = user.lat;\n      var lng2 = user.lng;\n      var R = 6371;\n      var dLat = toRad(lat2 - lat1);\n      var dLon = toRad(lng2 - lng1);\n      lat1 = toRad(lat1);\n      lat2 = toRad(lat2);\n      var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      var d = Math.floor(R * c);\n      return Math.floor(100 - d * 100 / 20000);\n    }\n    return 0;\n  };\n  return _jsxs(SafeArea, {\n    children: [_jsx(PageHeader, {}), _jsxs(ScrollView, {\n      style: styles.container,\n      children: [activeUser ? _jsxs(View, {\n        style: styles.userContainer,\n        children: [_jsxs(View, {\n          style: styles.selectorWrapper,\n          children: [_jsx(TouchableOpacity, {\n            onPress: onPrevUser,\n            children: _jsx(Image, {\n              style: styles.arrowImage,\n              source: Images.icon_arrow_left\n            })\n          }), _jsx(Text, {\n            style: styles.nameText,\n            children: activeUser.name || ''\n          }), _jsx(TouchableOpacity, {\n            onPress: onNextUser,\n            children: _jsx(Image, {\n              style: styles.arrowImage,\n              source: Images.icon_arrow_right\n            })\n          })]\n        }), _jsx(View, {\n          style: styles.compatibilityWrapper,\n          children: _jsxs(Text, {\n            style: styles.compatibilityText,\n            children: [\"Compatibility: \", getCompatibility(activeUser), \"%\"]\n          })\n        }), _jsxs(View, {\n          style: styles.userInfo,\n          children: [_jsx(FastImage, {\n            style: styles.avatar,\n            source: activeUser.profilePicture ? {\n              uri: activeUser.profilePicture\n            } : Images.avatar_placeholder\n          }), _jsxs(Text, {\n            style: styles.ageText,\n            children: [\"Age: \", getAge(activeUser.dateAndTimeOfBirth.toDate())]\n          })]\n        }), _jsxs(View, {\n          style: styles.actionWrapper,\n          children: [_jsx(TouchableOpacity, {\n            onPress: onLike,\n            children: _jsx(Image, {\n              style: styles.actionImage,\n              source: Images.icon_like\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: onDislike,\n            children: _jsx(Image, {\n              style: styles.actionImage,\n              source: Images.icon_dislike\n            })\n          })]\n        })]\n      }) : _jsx(EmptyView, {\n        title: 'No looking people'\n      }), loading && _jsx(LoadingOverlay, {})]\n    })]\n  });\n};\nexport default LookingScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 15\n  },\n  userContainer: {\n    flex: 1\n  },\n  selectorWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginVertical: 20\n  },\n  arrowImage: {\n    width: 24,\n    height: 24\n  },\n  nameText: {\n    color: ColorPalette.SOFT_MAGENTA,\n    fontSize: 24\n  },\n  compatibilityWrapper: {\n    alignItems: 'flex-end',\n    marginTop: 10,\n    marginBottom: 5\n  },\n  compatibilityText: {\n    fontSize: 24,\n    color: ColorPalette.SOFT_MAGENTA\n  },\n  avatar: {\n    width: '100%',\n    height: width,\n    borderRadius: 10\n  },\n  userInfo: {\n    position: 'relative'\n  },\n  actionWrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 50,\n    marginTop: 20\n  },\n  actionImage: {\n    width: 40,\n    height: 40\n  },\n  ageText: {\n    position: 'absolute',\n    bottom: 10,\n    width: '100%',\n    textAlign: 'center',\n    color: \"white\",\n    fontSize: 30,\n    backgroundColor: \"rgba(0,0,0,0.5)\"\n  }\n});\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    },\n    \"absolute\": {\n      \"position\": \"absolute\"\n    },\n    \"relative\": {\n      \"position\": \"relative\"\n    },\n    \"flex\": {\n      \"display\": \"flex\"\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  }\n});","map":{"version":3,"names":["useEffect","useState","useContext","useRef","FastImage","UserController","ColorPalette","Images","UserContext","LoadingOverlay","EmptyView","useLooking","getAge","ScrollView","useToast","ToastDialog","SafeArea","PageHeader","width","Dimensions","get","LookingScreen","toast","profile","count","error","show","render","users","loading","isLikeUpdating","setIsUpdating","activeUser","setActiveUser","length","onNextUser","current","onLike","likeUser","id","onDislike","dislikeUser","onPrevUser","toRad","Value","Math","PI","getCompatibility","user","lat1","lat","lng1","lng","lat2","lng2","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","d","floor","styles","container","userContainer","selectorWrapper","arrowImage","icon_arrow_left","nameText","name","icon_arrow_right","compatibilityWrapper","compatibilityText","userInfo","avatar","profilePicture","uri","avatar_placeholder","ageText","dateAndTimeOfBirth","toDate","actionWrapper","actionImage","icon_like","icon_dislike","StyleSheet","create","flex","paddingHorizontal","flexDirection","justifyContent","alignItems","marginVertical","height","color","SOFT_MAGENTA","fontSize","marginTop","marginBottom","borderRadius","position","bottom","textAlign","backgroundColor"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/frontend/screens/home/LookingScreen.tsx"],"sourcesContent":["import {\n    StyleSheet, View,\n    Text, TouchableOpacity,\n    Image, Dimensions\n} from 'react-native'\nimport { useEffect, useState, useContext, useRef } from \"react\";\nimport FastImage from '@app/frontend/components/global/image';\nimport UserController from \"@app/controller/user\";\nimport { ColorPalette } from \"@app/theme/colors\";\nimport Images from \"@app/theme/images\";\nimport {UserContext} from \"@app/context/user\";\nimport LoadingOverlay from \"@app/frontend/components/LoadingOverlay\";\nimport EmptyView from \"@app/frontend/components/EmptyView\";\nimport useLooking from '@app/hooks/useLooking';\nimport { FireDoc as doc } from '@app/shared/interfaces/firebase';\nimport { getAge } from '@app/shared/actions/time';\nimport { ScrollView, useToast } from 'native-base';\nimport ToastDialog from '@app/frontend/components/global/toast';\nimport SafeArea from '@app/frontend/components/global/safeArea';\nimport PageHeader from '@app/frontend/components/global/header';\n// import Card from \"@app/frontend/components/looking/card\";\n\nconst width = Dimensions.get('window').width;\n\n/**\n * TODO:\n * - [x] remove on previous user, add a button too go back to only 1 previous user\n * - [x] add swipe to go to next user\n */\n\nconst LookingScreen = () => {\n    const toast = useToast();\n    const { profile } = useContext(UserContext);\n    const count = useRef(0);\n    const {users, loading} = useLooking((error)=> {\n        toast.show({\n            render: () => <ToastDialog message={error} />\n        });\n    });\n    const [isLikeUpdating, setIsUpdating] = useState<boolean>(false);\n    const [activeUser, setActiveUser] = useState<doc|null|undefined>(null);\n\n    //load first user when users finished fetching\n    useEffect(()=> {\n        if (users.length > 0 && loading) {\n            setActiveUser(users[0]);\n        }\n    }, [users, loading])\n\n    /**\n     * this code run when user like\n     */\n     useEffect(()=>{\n        if (isLikeUpdating) {\n            //on user like or dislike\n            //set next user as active user\n            onNextUser();\n            setActiveUser(users[count.current]);\n            setIsUpdating(false);\n        }\n    }, [isLikeUpdating]);\n\n    useEffect(()=> {\n        if (users.length === 0) {\n\n            //if there is no user left, we will set activeUser to null\n            //we do this manually since setState is async, the users array may not be updated yet after like or dislike\n            setActiveUser(null);\n            count.current = 0;\n        } else if (users.length === 1 && !activeUser)  {\n            \n            //if activeUsers is null and theres new user, set activeUser to the new user\n            setActiveUser(users[0]);\n        } \n    }, [users, activeUser]);\n\n    /**\n     * on like button pressed\n     */\n    const onLike = async () => {\n        if (activeUser) {\n            setIsUpdating(true);\n            await UserController.likeUser(profile?.id!, activeUser.id);\n        }\n    }\n\n    /**\n     * on dislike button pressed\n     */\n    const onDislike = async () => {\n        if (activeUser) {\n            setIsUpdating(true);\n            await UserController.dislikeUser(profile?.id!, activeUser.id);\n        }\n    }\n\n    /**\n     * on next button pressed\n     */\n    const onNextUser = () => {\n        if (count.current < users.length-1) {\n            count.current++;\n            setActiveUser(users[count.current]);\n        } else {\n            setActiveUser(users[0]);\n            count.current = 0;\n        }\n    }\n\n    /**\n     * on previous button pressed\n     */\n    const onPrevUser = () => {\n        if (count.current > 0) {\n            count.current--;\n            setActiveUser(users[count.current]);\n        } else {\n            setActiveUser(users[users.length-1]);\n            count.current = users.length-1;\n        }\n    }\n\n    const toRad = (Value:any) => {\n        return (Value * Math.PI) / 180;\n    };\n\n    const getCompatibility = (user:doc) => {\n        if (profile && user) {\n            let lat1 = profile.lat;\n            let lng1 = profile.lng;\n            let lat2 = user.lat;\n            let lng2 = user.lng;\n\n            let R = 6371; // km\n            let dLat = toRad(lat2 - lat1!);\n            let dLon = toRad(lng2 - lng1!);\n            lat1 = toRad(lat1);\n            lat2 = toRad(lat2);\n\n            let a =\n                Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n                Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n            let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n            let d = Math.floor(R * c);\n            return Math.floor(100 - (d * 100) / 20000);\n        }\n        return 0;\n    }\n\n    return (\n        <SafeArea>\n            <PageHeader/>\n            <ScrollView style={styles.container}>\n                {activeUser ? (\n                    <View style={styles.userContainer}>\n                        <View style={styles.selectorWrapper}>\n                            <TouchableOpacity onPress={onPrevUser}>\n                                <Image style={styles.arrowImage} source={Images.icon_arrow_left}/>\n                            </TouchableOpacity>\n                            <Text style={styles.nameText}>{activeUser.name || ''}</Text>\n                            <TouchableOpacity onPress={onNextUser}>\n                                <Image style={styles.arrowImage} source={Images.icon_arrow_right}/>\n                            </TouchableOpacity>\n                        </View>\n                        <View style={styles.compatibilityWrapper}>\n                            <Text style={styles.compatibilityText}>Compatibility: {getCompatibility(activeUser)}%</Text>\n                        </View>\n                        <View style={styles.userInfo}>\n                            <FastImage style={styles.avatar} source={activeUser.profilePicture ? {uri: activeUser.profilePicture} : Images.avatar_placeholder} />\n                            <Text style={styles.ageText}>Age: {getAge(activeUser.dateAndTimeOfBirth.toDate())}</Text>\n                        </View>\n                        <View style={styles.actionWrapper}>\n                            <TouchableOpacity onPress={onLike}>\n                                <Image style={styles.actionImage} source={Images.icon_like} />\n                            </TouchableOpacity>\n                            <TouchableOpacity onPress={onDislike}>\n                                <Image style={styles.actionImage} source={Images.icon_dislike} />\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                ) : <EmptyView title={'No looking people'} />}\n                {loading && <LoadingOverlay />}\n            </ScrollView>\n        </SafeArea>   \n    )\n}\n\nexport default LookingScreen;\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingHorizontal: 15,\n    },\n    userContainer: {\n        flex: 1\n    },\n    selectorWrapper: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginVertical: 20\n    },\n    arrowImage: {\n        width: 24,\n        height: 24\n    },\n    nameText: {\n        color: ColorPalette.SOFT_MAGENTA,\n        fontSize: 24\n    },\n    compatibilityWrapper: {\n        alignItems: 'flex-end',\n        marginTop: 10,\n        marginBottom: 5\n    },\n    compatibilityText: {\n        fontSize: 24,\n        color: ColorPalette.SOFT_MAGENTA\n    },\n    avatar: {\n        width: '100%',\n        height: width,\n        borderRadius: 10\n    },\n    userInfo: {\n        position: 'relative'\n    },\n    actionWrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        paddingHorizontal: 50,\n        marginTop: 20\n    },\n    actionImage: {\n        width: 40,\n        height: 40\n    },\n    ageText: {\n        position: 'absolute',\n        bottom: 10,\n        width: '100%',\n        textAlign: 'center',\n        color: \"white\",\n        fontSize: 30,\n        backgroundColor: \"rgba(0,0,0,0.5)\",\n    }\n})\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}