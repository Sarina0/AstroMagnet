{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport GoogleSignIn from \"../config/auth\";\nimport { statusCodes } from \"@react-native-google-signin/google-signin\";\nimport auth from \"@react-native-firebase/auth\";\nexport function signInWithGoogle(_x) {\n  return _signInWithGoogle.apply(this, arguments);\n}\nfunction _signInWithGoogle() {\n  _signInWithGoogle = _asyncToGenerator(function* (onError) {\n    try {\n      var _yield$GoogleSignIn$s = yield GoogleSignIn.signIn(),\n        idToken = _yield$GoogleSignIn$s.idToken;\n      var googleCredential = auth.GoogleAuthProvider.credential(idToken);\n      return auth().signInWithCredential(googleCredential);\n    } catch (error) {\n      if (error.code === statusCodes.SIGN_IN_CANCELLED) {\n        onError(\"User cancelled the login flow\");\n      } else if (error.code === statusCodes.IN_PROGRESS) {\n        onError(\"Operation is in progress already\");\n      } else if (error.code === statusCodes.PLAY_SERVICES_NOT_AVAILABLE) {\n        onError(\"Play services not available or outdated\");\n      } else {\n        onError(error.message);\n      }\n    }\n  });\n  return _signInWithGoogle.apply(this, arguments);\n}\nexport function signOut() {\n  return _signOut.apply(this, arguments);\n}\nfunction _signOut() {\n  _signOut = _asyncToGenerator(function* () {\n    Promise.all([auth().signOut(), GoogleSignIn.signOut(), GoogleSignIn.revokeAccess()]).catch(function (error) {\n      console.log(\"[LOG] error sign out:\", error);\n    });\n  });\n  return _signOut.apply(this, arguments);\n}","map":{"version":3,"names":["GoogleSignIn","statusCodes","auth","signInWithGoogle","onError","signIn","idToken","googleCredential","GoogleAuthProvider","credential","signInWithCredential","error","code","SIGN_IN_CANCELLED","IN_PROGRESS","PLAY_SERVICES_NOT_AVAILABLE","message","signOut","Promise","all","revokeAccess","catch","console","log"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/controller/auth.tsx"],"sourcesContent":["import GoogleSignIn from \"@app/config/auth\";\nimport { statusCodes } from \"@react-native-google-signin/google-signin\";\nimport auth from \"@react-native-firebase/auth\";\n\n/**\n * function to sign in with google\n * @returns {Promise<firebase.auth.UserCredential>} user credential\n */\nexport async function signInWithGoogle(onError: (message: string) => void) {\n    try {\n        const { idToken } = await GoogleSignIn.signIn();\n        const googleCredential = auth.GoogleAuthProvider.credential(idToken);\n        return auth().signInWithCredential(googleCredential);\n      } catch(error:any) {\n        if (error.code === statusCodes.SIGN_IN_CANCELLED) {\n            // user cancelled the login flow\n            onError(\"User cancelled the login flow\");\n        } else if (error.code === statusCodes.IN_PROGRESS) {\n            // operation (e.g. sign in) is in progress already\n            onError(\"Operation is in progress already\");\n        } else if (error.code === statusCodes.PLAY_SERVICES_NOT_AVAILABLE) {\n            // play services not available or outdated\n            onError(\"Play services not available or outdated\");\n        } else {\n            // some other error happened\n            onError(error.message);\n        }\n    }\n}\n\n/**\n * function for sign out\n * @returns {Promise<void>}\n */\nexport async function signOut(): Promise<void> {\n    Promise.all([\n        auth().signOut(),\n        GoogleSignIn.signOut(),\n        GoogleSignIn.revokeAccess()\n    ]).catch((error) => {\n        console.log(\"[LOG] error sign out:\", error)\n    })\n}"],"mappings":";AAAA,OAAOA,YAAY;AACnB,SAASC,WAAW,QAAQ,2CAA2C;AACvE,OAAOC,IAAI,MAAM,6BAA6B;AAM9C,gBAAsBC,gBAAgB;EAAA;AAAA;AAoBrC;EAAA,sCApBM,WAAgCC,OAAkC,EAAE;IACvE,IAAI;MACA,kCAA0BJ,YAAY,CAACK,MAAM,EAAE;QAAvCC,OAAO,yBAAPA,OAAO;MACf,IAAMC,gBAAgB,GAAGL,IAAI,CAACM,kBAAkB,CAACC,UAAU,CAACH,OAAO,CAAC;MACpE,OAAOJ,IAAI,EAAE,CAACQ,oBAAoB,CAACH,gBAAgB,CAAC;IACtD,CAAC,CAAC,OAAMI,KAAS,EAAE;MACjB,IAAIA,KAAK,CAACC,IAAI,KAAKX,WAAW,CAACY,iBAAiB,EAAE;QAE9CT,OAAO,CAAC,+BAA+B,CAAC;MAC5C,CAAC,MAAM,IAAIO,KAAK,CAACC,IAAI,KAAKX,WAAW,CAACa,WAAW,EAAE;QAE/CV,OAAO,CAAC,kCAAkC,CAAC;MAC/C,CAAC,MAAM,IAAIO,KAAK,CAACC,IAAI,KAAKX,WAAW,CAACc,2BAA2B,EAAE;QAE/DX,OAAO,CAAC,yCAAyC,CAAC;MACtD,CAAC,MAAM;QAEHA,OAAO,CAACO,KAAK,CAACK,OAAO,CAAC;MAC1B;IACJ;EACJ,CAAC;EAAA;AAAA;AAMD,gBAAsBC,OAAO;EAAA;AAAA;AAQ5B;EAAA,6BARM,aAAwC;IAC3CC,OAAO,CAACC,GAAG,CAAC,CACRjB,IAAI,EAAE,CAACe,OAAO,EAAE,EAChBjB,YAAY,CAACiB,OAAO,EAAE,EACtBjB,YAAY,CAACoB,YAAY,EAAE,CAC9B,CAAC,CAACC,KAAK,CAAC,UAACV,KAAK,EAAK;MAChBW,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEZ,KAAK,CAAC;IAC/C,CAAC,CAAC;EACN,CAAC;EAAA;AAAA"},"metadata":{},"sourceType":"module"}