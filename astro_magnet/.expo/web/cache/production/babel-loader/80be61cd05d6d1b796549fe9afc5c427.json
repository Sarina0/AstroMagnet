{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import GoogleSignIn from\"../config/auth\";import{statusCodes}from\"@react-native-google-signin/google-signin\";import auth from\"@react-native-firebase/auth\";export function signInWithGoogle(_x){return _signInWithGoogle.apply(this,arguments);}function _signInWithGoogle(){_signInWithGoogle=_asyncToGenerator(function*(onError){try{var _yield$GoogleSignIn$s=yield GoogleSignIn.signIn(),idToken=_yield$GoogleSignIn$s.idToken;var googleCredential=auth.GoogleAuthProvider.credential(idToken);return auth().signInWithCredential(googleCredential);}catch(error){if(error.code===statusCodes.SIGN_IN_CANCELLED){onError(\"User cancelled the login flow\");}else if(error.code===statusCodes.IN_PROGRESS){onError(\"Operation is in progress already\");}else if(error.code===statusCodes.PLAY_SERVICES_NOT_AVAILABLE){onError(\"Play services not available or outdated\");}else{onError(error.message);}}});return _signInWithGoogle.apply(this,arguments);}export function signOut(){return _signOut.apply(this,arguments);}function _signOut(){_signOut=_asyncToGenerator(function*(){Promise.all([auth().signOut(),GoogleSignIn.signOut(),GoogleSignIn.revokeAccess()]).catch(function(error){console.log(\"[LOG] error sign out:\",error);});});return _signOut.apply(this,arguments);}","map":{"version":3,"names":["GoogleSignIn","statusCodes","auth","signInWithGoogle","onError","signIn","idToken","googleCredential","GoogleAuthProvider","credential","signInWithCredential","error","code","SIGN_IN_CANCELLED","IN_PROGRESS","PLAY_SERVICES_NOT_AVAILABLE","message","signOut","Promise","all","revokeAccess","catch","console","log"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/controller/auth.tsx"],"sourcesContent":["import GoogleSignIn from \"@app/config/auth\";\nimport { statusCodes } from \"@react-native-google-signin/google-signin\";\nimport auth from \"@react-native-firebase/auth\";\n\n/**\n * function to sign in with google\n * @returns {Promise<firebase.auth.UserCredential>} user credential\n */\nexport async function signInWithGoogle(onError: (message: string) => void) {\n    try {\n        const { idToken } = await GoogleSignIn.signIn();\n        const googleCredential = auth.GoogleAuthProvider.credential(idToken);\n        return auth().signInWithCredential(googleCredential);\n      } catch(error:any) {\n        if (error.code === statusCodes.SIGN_IN_CANCELLED) {\n            // user cancelled the login flow\n            onError(\"User cancelled the login flow\");\n        } else if (error.code === statusCodes.IN_PROGRESS) {\n            // operation (e.g. sign in) is in progress already\n            onError(\"Operation is in progress already\");\n        } else if (error.code === statusCodes.PLAY_SERVICES_NOT_AVAILABLE) {\n            // play services not available or outdated\n            onError(\"Play services not available or outdated\");\n        } else {\n            // some other error happened\n            onError(error.message);\n        }\n    }\n}\n\n/**\n * function for sign out\n * @returns {Promise<void>}\n */\nexport async function signOut(): Promise<void> {\n    Promise.all([\n        auth().signOut(),\n        GoogleSignIn.signOut(),\n        GoogleSignIn.revokeAccess()\n    ]).catch((error) => {\n        console.log(\"[LOG] error sign out:\", error)\n    })\n}"],"mappings":"uEAAA,MAAOA,aAAY,sBACnB,OAASC,WAAW,KAAQ,2CAA2C,CACvE,MAAOC,KAAI,KAAM,6BAA6B,CAM9C,eAAsBC,iBAAgB,qDAoBrC,iEApBM,UAAgCC,OAAkC,CAAE,CACvE,GAAI,CACA,+BAA0BJ,aAAY,CAACK,MAAM,EAAE,CAAvCC,OAAO,uBAAPA,OAAO,CACf,GAAMC,iBAAgB,CAAGL,IAAI,CAACM,kBAAkB,CAACC,UAAU,CAACH,OAAO,CAAC,CACpE,MAAOJ,KAAI,EAAE,CAACQ,oBAAoB,CAACH,gBAAgB,CAAC,CACtD,CAAE,MAAMI,KAAS,CAAE,CACjB,GAAIA,KAAK,CAACC,IAAI,GAAKX,WAAW,CAACY,iBAAiB,CAAE,CAE9CT,OAAO,CAAC,+BAA+B,CAAC,CAC5C,CAAC,IAAM,IAAIO,KAAK,CAACC,IAAI,GAAKX,WAAW,CAACa,WAAW,CAAE,CAE/CV,OAAO,CAAC,kCAAkC,CAAC,CAC/C,CAAC,IAAM,IAAIO,KAAK,CAACC,IAAI,GAAKX,WAAW,CAACc,2BAA2B,CAAE,CAE/DX,OAAO,CAAC,yCAAyC,CAAC,CACtD,CAAC,IAAM,CAEHA,OAAO,CAACO,KAAK,CAACK,OAAO,CAAC,CAC1B,CACJ,CACJ,CAAC,kDAMD,eAAsBC,QAAO,0CAQ5B,+CARM,WAAwC,CAC3CC,OAAO,CAACC,GAAG,CAAC,CACRjB,IAAI,EAAE,CAACe,OAAO,EAAE,CAChBjB,YAAY,CAACiB,OAAO,EAAE,CACtBjB,YAAY,CAACoB,YAAY,EAAE,CAC9B,CAAC,CAACC,KAAK,CAAC,SAACV,KAAK,CAAK,CAChBW,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEZ,KAAK,CAAC,CAC/C,CAAC,CAAC,CACN,CAAC"},"metadata":{},"sourceType":"module"}