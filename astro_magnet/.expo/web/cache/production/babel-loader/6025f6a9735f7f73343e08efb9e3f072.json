{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import{isBoolean,isFunction,isObject,isUndefined}from'@react-native-firebase/app/lib/common';import FirestoreDocumentChange from\"./FirestoreDocumentChange\";import FirestoreDocumentSnapshot from\"./FirestoreDocumentSnapshot\";import FirestoreSnapshotMetadata from\"./FirestoreSnapshotMetadata\";var FirestoreQuerySnapshot=function(){function FirestoreQuerySnapshot(firestore,query,nativeData){_classCallCheck(this,FirestoreQuerySnapshot);this._query=query;this._source=nativeData.source;this._excludesMetadataChanges=nativeData.excludesMetadataChanges;this._changes=nativeData.changes.map(function($){return new FirestoreDocumentChange(firestore,$);});this._docs=nativeData.documents.map(function($){return new FirestoreDocumentSnapshot(firestore,$);});this._metadata=new FirestoreSnapshotMetadata(nativeData.metadata);}_createClass(FirestoreQuerySnapshot,[{key:\"docs\",get:function get(){return this._docs;}},{key:\"empty\",get:function get(){return this._docs.length===0;}},{key:\"metadata\",get:function get(){return this._metadata;}},{key:\"query\",get:function get(){return this._query;}},{key:\"size\",get:function get(){return this._docs.length;}},{key:\"docChanges\",value:function docChanges(options){if(!isUndefined(options)&&!isObject(options)){throw new Error(\"firebase.firestore() QuerySnapshot.docChanges(*) 'options' expected an object.\");}var includeMetaDataChanges=false;if(options){if(!isBoolean(options.includeMetadataChanges)){throw new Error(\"firebase.firestore() QuerySnapshot.docChanges(*) 'options.includeMetadataChanges' expected a boolean.\");}includeMetaDataChanges=options.includeMetadataChanges;}if(this._source==='get'){return this._changes;}if(includeMetaDataChanges&&this._excludesMetadataChanges){throw new Error('firebase.firestore() QuerySnapshot.docChanges() To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().');}return this._changes.filter(function($){if(!includeMetaDataChanges){return $._isMetadataChange===false;}return true;});}},{key:\"forEach\",value:function forEach(callback,thisArg){if(!isFunction(callback)){throw new Error(\"firebase.firestore() QuerySnapshot.forEach(*) 'callback' expected a function.\");}var cb=thisArg?callback.bind(thisArg):callback;for(var i=0;i<this._docs.length;i++){cb(this._docs[i],i);}}},{key:\"isEqual\",value:function isEqual(other){if(!(other instanceof FirestoreQuerySnapshot)){throw new Error(\"firebase.firestore() QuerySnapshot.isEqual(*) 'other' expected a QuerySnapshot instance.\");}if(this.empty!==other.empty||this.size!==other.size||!this.metadata.isEqual(other.metadata)){return false;}for(var i=0;i<this.docs.length;i++){var thisDoc=this.docs[i];var otherDoc=other.docs[i];if(!thisDoc.isEqual(otherDoc)){return false;}}return true;}}]);return FirestoreQuerySnapshot;}();export{FirestoreQuerySnapshot as default};","map":{"version":3,"names":["isBoolean","isFunction","isObject","isUndefined","FirestoreDocumentChange","FirestoreDocumentSnapshot","FirestoreSnapshotMetadata","FirestoreQuerySnapshot","firestore","query","nativeData","_query","_source","source","_excludesMetadataChanges","excludesMetadataChanges","_changes","changes","map","$","_docs","documents","_metadata","metadata","length","options","Error","includeMetaDataChanges","includeMetadataChanges","filter","_isMetadataChange","callback","thisArg","cb","bind","i","other","empty","size","isEqual","docs","thisDoc","otherDoc"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/node_modules/@react-native-firebase/firestore/lib/FirestoreQuerySnapshot.js"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  isBoolean,\n  isFunction,\n  isObject,\n  isUndefined,\n} from '@react-native-firebase/app/lib/common';\nimport FirestoreDocumentChange from './FirestoreDocumentChange';\nimport FirestoreDocumentSnapshot from './FirestoreDocumentSnapshot';\nimport FirestoreSnapshotMetadata from './FirestoreSnapshotMetadata';\n\nexport default class FirestoreQuerySnapshot {\n  constructor(firestore, query, nativeData) {\n    this._query = query;\n    this._source = nativeData.source;\n    this._excludesMetadataChanges = nativeData.excludesMetadataChanges;\n    this._changes = nativeData.changes.map($ => new FirestoreDocumentChange(firestore, $));\n    this._docs = nativeData.documents.map($ => new FirestoreDocumentSnapshot(firestore, $));\n    this._metadata = new FirestoreSnapshotMetadata(nativeData.metadata);\n  }\n\n  get docs() {\n    return this._docs;\n  }\n\n  get empty() {\n    return this._docs.length === 0;\n  }\n\n  get metadata() {\n    return this._metadata;\n  }\n\n  get query() {\n    return this._query;\n  }\n\n  get size() {\n    return this._docs.length;\n  }\n\n  docChanges(options) {\n    if (!isUndefined(options) && !isObject(options)) {\n      throw new Error(\n        \"firebase.firestore() QuerySnapshot.docChanges(*) 'options' expected an object.\",\n      );\n    }\n\n    let includeMetaDataChanges = false;\n\n    if (options) {\n      if (!isBoolean(options.includeMetadataChanges)) {\n        throw new Error(\n          \"firebase.firestore() QuerySnapshot.docChanges(*) 'options.includeMetadataChanges' expected a boolean.\",\n        );\n      }\n\n      includeMetaDataChanges = options.includeMetadataChanges;\n    }\n\n    // A get query should always return the document changes from native\n    if (this._source === 'get') {\n      return this._changes;\n    }\n\n    if (includeMetaDataChanges && this._excludesMetadataChanges) {\n      throw new Error(\n        'firebase.firestore() QuerySnapshot.docChanges() To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().',\n      );\n    }\n\n    return this._changes.filter($ => {\n      // Remove all changes that have come from metadata changes list\n      if (!includeMetaDataChanges) {\n        return $._isMetadataChange === false;\n      }\n\n      return true;\n    });\n  }\n\n  forEach(callback, thisArg) {\n    if (!isFunction(callback)) {\n      throw new Error(\n        \"firebase.firestore() QuerySnapshot.forEach(*) 'callback' expected a function.\",\n      );\n    }\n\n    const cb = thisArg ? callback.bind(thisArg) : callback;\n\n    for (let i = 0; i < this._docs.length; i++) {\n      cb(this._docs[i], i);\n    }\n  }\n\n  isEqual(other) {\n    if (!(other instanceof FirestoreQuerySnapshot)) {\n      throw new Error(\n        \"firebase.firestore() QuerySnapshot.isEqual(*) 'other' expected a QuerySnapshot instance.\",\n      );\n    }\n\n    // Simple checks first\n    if (\n      this.empty !== other.empty ||\n      this.size !== other.size ||\n      !this.metadata.isEqual(other.metadata)\n    ) {\n      return false;\n    }\n\n    // Expensive check\n    // Each doc must be in order & have the same data\n    for (let i = 0; i < this.docs.length; i++) {\n      const thisDoc = this.docs[i];\n      const otherDoc = other.docs[i];\n\n      if (!thisDoc.isEqual(otherDoc)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}