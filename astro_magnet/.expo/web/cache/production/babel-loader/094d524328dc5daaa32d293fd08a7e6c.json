{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import{isObject,isString,isUndefined}from'@react-native-firebase/app/lib/common';import NativeError from'@react-native-firebase/app/lib/internal/NativeFirebaseError';import{parseSetOptions,parseSnapshotArgs,parseUpdateArgs}from\"./utils\";import{buildNativeMap,provideDocumentReferenceClass}from\"./utils/serialize\";var FirestoreCollectionReference=null;export function provideCollectionReferenceClass(collectionReference){FirestoreCollectionReference=collectionReference;}var FirestoreDocumentSnapshot=null;export function provideDocumentSnapshotClass(documentSnapshot){FirestoreDocumentSnapshot=documentSnapshot;}var _id=0;var FirestoreDocumentReference=function(){function FirestoreDocumentReference(firestore,documentPath){_classCallCheck(this,FirestoreDocumentReference);this._firestore=firestore;this._documentPath=documentPath;}_createClass(FirestoreDocumentReference,[{key:\"firestore\",get:function get(){return this._firestore;}},{key:\"id\",get:function get(){return this._documentPath.id;}},{key:\"parent\",get:function get(){var parentPath=this._documentPath.parent();return new FirestoreCollectionReference(this._firestore,parentPath);}},{key:\"path\",get:function get(){return this._documentPath.relativeName;}},{key:\"collection\",value:function collection(collectionPath){if(!isString(collectionPath)){throw new Error(\"firebase.firestore().doc().collection(*) 'collectionPath' must be a string value.\");}if(collectionPath===''){throw new Error(\"firebase.firestore().doc().collection(*) 'collectionPath' must be a non-empty string.\");}var path=this._documentPath.child(collectionPath);if(!path.isCollection){throw new Error(\"firebase.firestore().doc().collection(*) 'collectionPath' must point to a collection.\");}return new FirestoreCollectionReference(this._firestore,path);}},{key:\"delete\",value:function _delete(){return this._firestore.native.documentDelete(this.path);}},{key:\"get\",value:function get(options){var _this=this;if(!isUndefined(options)&&!isObject(options)){throw new Error(\"firebase.firestore().doc().get(*) 'options' must be an object is provided.\");}if(options&&options.source&&options.source!=='default'&&options.source!=='server'&&options.source!=='cache'){throw new Error(\"firebase.firestore().doc().get(*) 'options' GetOptions.source must be one of 'default', 'server' or 'cache'.\");}return this._firestore.native.documentGet(this.path,options).then(function(data){return new FirestoreDocumentSnapshot(_this._firestore,data);});}},{key:\"isEqual\",value:function isEqual(other){if(!(other instanceof FirestoreDocumentReference)){throw new Error(\"firebase.firestore().doc().isEqual(*) 'other' expected a DocumentReference instance.\");}return!(this.path!==other.path||this.firestore.app.name!==other.firestore.app.name||this.firestore.app.options.projectId!==other.firestore.app.options.projectId);}},{key:\"onSnapshot\",value:function onSnapshot(){var _this2=this;var snapshotListenOptions;var callback;var onNext;var onError;try{for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var options=parseSnapshotArgs(args);snapshotListenOptions=options.snapshotListenOptions;callback=options.callback;onNext=options.onNext;onError=options.onError;}catch(e){throw new Error(\"firebase.firestore().doc().onSnapshot(*) \"+e.message);}function handleSuccess(documentSnapshot){callback(documentSnapshot,null);onNext(documentSnapshot);}function handleError(error){callback(null,error);onError(error);}var listenerId=_id++;var onSnapshotSubscription=this._firestore.emitter.addListener(this._firestore.eventNameForApp(\"firestore_document_sync_event:\"+listenerId),function(event){if(event.body.error){handleError(NativeError.fromEvent(event.body.error,'firestore'));}else{var documentSnapshot=new FirestoreDocumentSnapshot(_this2._firestore,event.body.snapshot);handleSuccess(documentSnapshot);}});var unsubscribe=function unsubscribe(){onSnapshotSubscription.remove();_this2._firestore.native.documentOffSnapshot(listenerId);};this._firestore.native.documentOnSnapshot(this.path,listenerId,snapshotListenOptions);return unsubscribe;}},{key:\"set\",value:function set(data,options){if(!isObject(data)){throw new Error(\"firebase.firestore().doc().set(*) 'data' must be an object.\");}var setOptions;try{setOptions=parseSetOptions(options);}catch(e){throw new Error(\"firebase.firestore().doc().set(_, *) \"+e.message+\".\");}return this._firestore.native.documentSet(this.path,buildNativeMap(data,this._firestore._settings.ignoreUndefinedProperties),setOptions);}},{key:\"update\",value:function update(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}if(args.length===0){throw new Error('firebase.firestore().doc().update(*) expected at least 1 argument but was called with 0 arguments.');}var data;try{data=parseUpdateArgs(args);}catch(e){throw new Error(\"firebase.firestore().doc().update(*) \"+e.message);}return this._firestore.native.documentUpdate(this.path,buildNativeMap(data,this._firestore._settings.ignoreUndefinedProperties));}}]);return FirestoreDocumentReference;}();export{FirestoreDocumentReference as default};provideDocumentReferenceClass(FirestoreDocumentReference);","map":{"version":3,"names":["isObject","isString","isUndefined","NativeError","parseSetOptions","parseSnapshotArgs","parseUpdateArgs","buildNativeMap","provideDocumentReferenceClass","FirestoreCollectionReference","provideCollectionReferenceClass","collectionReference","FirestoreDocumentSnapshot","provideDocumentSnapshotClass","documentSnapshot","_id","FirestoreDocumentReference","firestore","documentPath","_firestore","_documentPath","id","parentPath","parent","relativeName","collectionPath","Error","path","child","isCollection","native","documentDelete","options","source","documentGet","then","data","other","app","name","projectId","snapshotListenOptions","callback","onNext","onError","args","e","message","handleSuccess","handleError","error","listenerId","onSnapshotSubscription","emitter","addListener","eventNameForApp","event","body","fromEvent","snapshot","unsubscribe","remove","documentOffSnapshot","documentOnSnapshot","setOptions","documentSet","_settings","ignoreUndefinedProperties","length","documentUpdate"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/node_modules/@react-native-firebase/firestore/lib/FirestoreDocumentReference.js"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { isObject, isString, isUndefined } from '@react-native-firebase/app/lib/common';\nimport NativeError from '@react-native-firebase/app/lib/internal/NativeFirebaseError';\nimport { parseSetOptions, parseSnapshotArgs, parseUpdateArgs } from './utils';\nimport { buildNativeMap, provideDocumentReferenceClass } from './utils/serialize';\n\n// To avoid React Native require cycle warnings\nlet FirestoreCollectionReference = null;\nexport function provideCollectionReferenceClass(collectionReference) {\n  FirestoreCollectionReference = collectionReference;\n}\n\nlet FirestoreDocumentSnapshot = null;\nexport function provideDocumentSnapshotClass(documentSnapshot) {\n  FirestoreDocumentSnapshot = documentSnapshot;\n}\n\nlet _id = 0;\n\nexport default class FirestoreDocumentReference {\n  constructor(firestore, documentPath) {\n    this._firestore = firestore;\n    this._documentPath = documentPath;\n  }\n\n  get firestore() {\n    return this._firestore;\n  }\n\n  get id() {\n    return this._documentPath.id;\n  }\n\n  get parent() {\n    const parentPath = this._documentPath.parent();\n    return new FirestoreCollectionReference(this._firestore, parentPath);\n  }\n\n  get path() {\n    return this._documentPath.relativeName;\n  }\n\n  collection(collectionPath) {\n    if (!isString(collectionPath)) {\n      throw new Error(\n        \"firebase.firestore().doc().collection(*) 'collectionPath' must be a string value.\",\n      );\n    }\n\n    if (collectionPath === '') {\n      throw new Error(\n        \"firebase.firestore().doc().collection(*) 'collectionPath' must be a non-empty string.\",\n      );\n    }\n\n    const path = this._documentPath.child(collectionPath);\n\n    if (!path.isCollection) {\n      throw new Error(\n        \"firebase.firestore().doc().collection(*) 'collectionPath' must point to a collection.\",\n      );\n    }\n\n    return new FirestoreCollectionReference(this._firestore, path);\n  }\n\n  delete() {\n    return this._firestore.native.documentDelete(this.path);\n  }\n\n  get(options) {\n    if (!isUndefined(options) && !isObject(options)) {\n      throw new Error(\"firebase.firestore().doc().get(*) 'options' must be an object is provided.\");\n    }\n\n    if (\n      options &&\n      options.source &&\n      options.source !== 'default' &&\n      options.source !== 'server' &&\n      options.source !== 'cache'\n    ) {\n      throw new Error(\n        \"firebase.firestore().doc().get(*) 'options' GetOptions.source must be one of 'default', 'server' or 'cache'.\",\n      );\n    }\n\n    return this._firestore.native\n      .documentGet(this.path, options)\n      .then(data => new FirestoreDocumentSnapshot(this._firestore, data));\n  }\n\n  isEqual(other) {\n    if (!(other instanceof FirestoreDocumentReference)) {\n      throw new Error(\n        \"firebase.firestore().doc().isEqual(*) 'other' expected a DocumentReference instance.\",\n      );\n    }\n\n    return !(\n      this.path !== other.path ||\n      this.firestore.app.name !== other.firestore.app.name ||\n      this.firestore.app.options.projectId !== other.firestore.app.options.projectId\n    );\n  }\n\n  onSnapshot(...args) {\n    let snapshotListenOptions;\n    let callback;\n    let onNext;\n    let onError;\n\n    try {\n      const options = parseSnapshotArgs(args);\n      snapshotListenOptions = options.snapshotListenOptions;\n      callback = options.callback;\n      onNext = options.onNext;\n      onError = options.onError;\n    } catch (e) {\n      throw new Error(`firebase.firestore().doc().onSnapshot(*) ${e.message}`);\n    }\n\n    function handleSuccess(documentSnapshot) {\n      callback(documentSnapshot, null);\n      onNext(documentSnapshot);\n    }\n\n    function handleError(error) {\n      callback(null, error);\n      onError(error);\n    }\n\n    const listenerId = _id++;\n\n    const onSnapshotSubscription = this._firestore.emitter.addListener(\n      this._firestore.eventNameForApp(`firestore_document_sync_event:${listenerId}`),\n      event => {\n        if (event.body.error) {\n          handleError(NativeError.fromEvent(event.body.error, 'firestore'));\n        } else {\n          const documentSnapshot = new FirestoreDocumentSnapshot(\n            this._firestore,\n            event.body.snapshot,\n          );\n          handleSuccess(documentSnapshot);\n        }\n      },\n    );\n\n    const unsubscribe = () => {\n      onSnapshotSubscription.remove();\n      this._firestore.native.documentOffSnapshot(listenerId);\n    };\n\n    this._firestore.native.documentOnSnapshot(this.path, listenerId, snapshotListenOptions);\n\n    return unsubscribe;\n  }\n\n  set(data, options) {\n    if (!isObject(data)) {\n      throw new Error(\"firebase.firestore().doc().set(*) 'data' must be an object.\");\n    }\n\n    let setOptions;\n    try {\n      setOptions = parseSetOptions(options);\n    } catch (e) {\n      throw new Error(`firebase.firestore().doc().set(_, *) ${e.message}.`);\n    }\n\n    return this._firestore.native.documentSet(\n      this.path,\n      buildNativeMap(data, this._firestore._settings.ignoreUndefinedProperties),\n      setOptions,\n    );\n  }\n\n  update(...args) {\n    if (args.length === 0) {\n      throw new Error(\n        'firebase.firestore().doc().update(*) expected at least 1 argument but was called with 0 arguments.',\n      );\n    }\n\n    let data;\n    try {\n      data = parseUpdateArgs(args);\n    } catch (e) {\n      throw new Error(`firebase.firestore().doc().update(*) ${e.message}`);\n    }\n\n    return this._firestore.native.documentUpdate(\n      this.path,\n      buildNativeMap(data, this._firestore._settings.ignoreUndefinedProperties),\n    );\n  }\n}\n\nprovideDocumentReferenceClass(FirestoreDocumentReference); // serialize\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}