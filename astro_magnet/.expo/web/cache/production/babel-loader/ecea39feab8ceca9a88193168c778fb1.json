{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{useState,useEffect}from\"react\";import auth from\"@react-native-firebase/auth\";export default function useAuthState(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"loading\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];function onAuthStateChanged(user){console.log(\"[LOG] user state changed\");if(user){console.log(\"[LOG] user authenticated\");setUser(user);setStatus(\"authenticated\");}else{console.log(\"[LOG] user unauthenticated\");setUser(null);setStatus(\"unauthenticated\");}}useEffect(function(){var unsubscribe=auth().onAuthStateChanged(onAuthStateChanged);return unsubscribe;},[]);return{user:user,status:status};}","map":{"version":3,"names":["useState","useEffect","auth","useAuthState","user","setUser","status","setStatus","onAuthStateChanged","console","log","unsubscribe"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/hooks/useAuthState.tsx"],"sourcesContent":["import {useState, useEffect} from \"react\";\nimport auth, { FirebaseAuthTypes } from \"@react-native-firebase/auth\";\n\ntype status = \"authenticated\" | \"unauthenticated\" | \"loading\";\n\nexport default function useAuthState() {\n\n    /**authenticated user*/\n    const [user, setUser] = useState<FirebaseAuthTypes.User|null>(null);\n\n    /**authentication status loading-unauthenticated-authenticated*/\n    const [status, setStatus] = useState<status>(\"loading\");\n\n    // Handle user state changes\n    function onAuthStateChanged(user: FirebaseAuthTypes.User|null) {\n      console.log(\"[LOG] user state changed\");\n      if (user) {\n        console.log(\"[LOG] user authenticated\");\n        setUser(user);\n        setStatus(\"authenticated\");\n      } else {\n        console.log(\"[LOG] user unauthenticated\");\n        setUser(null);\n        setStatus(\"unauthenticated\");\n      }\n    }\n\n    useEffect(() => {\n      //on auth state change will return a function to unsubscribe\n      const unsubscribe = auth().onAuthStateChanged(onAuthStateChanged);\n      // unsubscribe on view unmount\n      return unsubscribe;\n    }, []);\n\n    return {\n        user,\n        status\n    }\n}"],"mappings":"iEAAA,OAAQA,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACzC,MAAOC,KAAI,KAA6B,6BAA6B,CAIrE,cAAe,SAASC,aAAY,EAAG,CAGnC,cAAwBH,QAAQ,CAA8B,IAAI,CAAC,wCAA5DI,IAAI,eAAEC,OAAO,eAGpB,eAA4BL,QAAQ,CAAS,SAAS,CAAC,yCAAhDM,MAAM,eAAEC,SAAS,eAGxB,QAASC,mBAAkB,CAACJ,IAAiC,CAAE,CAC7DK,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvC,GAAIN,IAAI,CAAE,CACRK,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvCL,OAAO,CAACD,IAAI,CAAC,CACbG,SAAS,CAAC,eAAe,CAAC,CAC5B,CAAC,IAAM,CACLE,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzCL,OAAO,CAAC,IAAI,CAAC,CACbE,SAAS,CAAC,iBAAiB,CAAC,CAC9B,CACF,CAEAN,SAAS,CAAC,UAAM,CAEd,GAAMU,YAAW,CAAGT,IAAI,EAAE,CAACM,kBAAkB,CAACA,kBAAkB,CAAC,CAEjE,MAAOG,YAAW,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACHP,IAAI,CAAJA,IAAI,CACJE,MAAM,CAANA,MACJ,CAAC,CACL"},"metadata":{},"sourceType":"module"}