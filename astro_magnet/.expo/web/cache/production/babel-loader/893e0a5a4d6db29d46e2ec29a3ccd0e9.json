{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React from'react';import AccessibilityInfo from\"react-native-web/dist/exports/AccessibilityInfo\";export function useScreenReaderEnabled(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),enabled=_React$useState2[0],setEnabled=_React$useState2[1];var mountedRef=React.useRef(false);var handleSetEnabled=function handleSetEnabled(value){if(mountedRef.current){setEnabled(value);}};React.useEffect(function(){mountedRef.current=true;function setInitialValue(){return _setInitialValue.apply(this,arguments);}function _setInitialValue(){_setInitialValue=_asyncToGenerator(function*(){var res=yield AccessibilityInfo.isScreenReaderEnabled();handleSetEnabled(res);});return _setInitialValue.apply(this,arguments);}var handler=AccessibilityInfo.addEventListener('screenReaderChanged',function(event){handleSetEnabled(event);});setInitialValue();return function(){mountedRef.current=false;AccessibilityInfo.removeEventListener('screenReaderChanged',handler);};});return enabled;}","map":{"version":3,"sources":["useScreenReaderEnabled.ts"],"names":["React","useScreenReaderEnabled","enabled","setEnabled","useState","mountedRef","useRef","handleSetEnabled","value","current","useEffect","setInitialValue","res","AccessibilityInfo","isScreenReaderEnabled","handler","addEventListener","event","removeEventListener"],"mappings":"wIAAA,MAAOA,MAAP,KAAkB,OAAlB,CAAA,+EAGA,MAAO,SAASC,uBAAT,EAAkC,CACvC,oBAA8BD,KAAK,CAACI,QAANJ,CAAe,KAAfA,CAA9B,oDAAOE,OAAD,qBAAUC,UAAV,qBACN,GAAME,WAAU,CAAGL,KAAK,CAACM,MAANN,CAAa,KAAbA,CAAnB,CAEA,GAAMO,iBAAgB,CAAIC,QAApBD,iBAAgB,CAAIC,KAAD,CAAoB,CAC3C,GAAIH,UAAU,CAACI,OAAf,CAAwB,CACtBN,UAAU,CAACK,KAAD,CAAVL,CACD,CACF,CAJD,CAMAH,KAAK,CAACU,SAANV,CAAgB,UAAM,CACpBK,UAAU,CAACI,OAAXJ,CAAqB,IAArBA,CAAAA,QACeM,gBAAf,iHAAA,WAAiC,CAC/B,GAAMC,IAAG,MAASC,kBAAiB,CAACC,qBAAlBD,EAAlB,CACAN,gBAAgB,CAACK,GAAD,CAAhBL,CACD,CAAA,iDAED,GAAIQ,QAAY,CAAG,iBAAiB,CAACC,gBAAlB,CACjB,qBADiB,CAEhBC,SAAAA,KAAD,CAAgB,CACdV,gBAAgB,CAACU,KAAD,CAAhBV,CACD,CAJgB,CAAnB,CAOAI,eAAe,EAAA,CACf,MAAO,WAAM,CACXN,UAAU,CAACI,OAAXJ,CAAqB,KAArBA,CACAQ,iBAAiB,CAACK,mBAAlBL,CAAsC,qBAAtCA,CAA6DE,OAA7DF,CAAAA,CACD,CAHD,CAID,CAnBDb,CAAAA,CAqBA,MAAOE,QAAP,CACD","sourcesContent":["import React from 'react';\nimport { AccessibilityInfo } from 'react-native';\n\nexport function useScreenReaderEnabled() {\n  const [enabled, setEnabled] = React.useState(false);\n  const mountedRef = React.useRef(false);\n\n  const handleSetEnabled = (value: boolean) => {\n    if (mountedRef.current) {\n      setEnabled(value);\n    }\n  };\n\n  React.useEffect(() => {\n    mountedRef.current = true;\n    async function setInitialValue() {\n      const res = await AccessibilityInfo.isScreenReaderEnabled();\n      handleSetEnabled(res);\n    }\n\n    let handler: any = AccessibilityInfo.addEventListener(\n      'screenReaderChanged',\n      (event: any) => {\n        handleSetEnabled(event);\n      }\n    );\n\n    setInitialValue();\n    return () => {\n      mountedRef.current = false;\n      AccessibilityInfo.removeEventListener('screenReaderChanged', handler);\n    };\n  });\n\n  return enabled;\n}\n"]},"metadata":{},"sourceType":"module"}