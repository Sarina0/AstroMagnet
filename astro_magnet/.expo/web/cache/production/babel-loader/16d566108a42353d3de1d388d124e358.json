{"ast":null,"code":"import{isIOS,isNull,isObject,isString,isUndefined}from'@react-native-firebase/app/lib/common';import FirebaseApp from\"../../FirebaseApp\";import{DEFAULT_APP_NAME}from\"../constants\";import{getAppModule}from\"./nativeModule\";var APP_REGISTRY={};var onAppCreateFn=null;var onAppDestroyFn=null;var initializedNativeApps=false;export function setOnAppCreate(fn){onAppCreateFn=fn;}export function setOnAppDestroy(fn){onAppDestroyFn=fn;}export function initializeNativeApps(){var nativeModule=getAppModule();var NATIVE_FIREBASE_APPS=nativeModule.NATIVE_FIREBASE_APPS;if(NATIVE_FIREBASE_APPS&&NATIVE_FIREBASE_APPS.length){for(var i=0;i<NATIVE_FIREBASE_APPS.length;i++){var _NATIVE_FIREBASE_APPS=NATIVE_FIREBASE_APPS[i],appConfig=_NATIVE_FIREBASE_APPS.appConfig,options=_NATIVE_FIREBASE_APPS.options;var name=appConfig.name;APP_REGISTRY[name]=new FirebaseApp(options,appConfig,true,deleteApp.bind(null,name,true));onAppCreateFn(APP_REGISTRY[name]);}}initializedNativeApps=true;}export function getApp(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:DEFAULT_APP_NAME;if(!initializedNativeApps){initializeNativeApps();}var app=APP_REGISTRY[name];if(!app){throw new Error(\"No Firebase App '\"+name+\"' has been created - call firebase.initializeApp()\");}return app;}export function getApps(){if(!initializedNativeApps){initializeNativeApps();}return Object.values(APP_REGISTRY);}export function initializeApp(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var configOrName=arguments.length>1?arguments[1]:undefined;var appConfig=configOrName;if(!isObject(configOrName)||isNull(configOrName)){appConfig={name:configOrName,automaticResourceManagement:false,automaticDataCollectionEnabled:true};}if(isUndefined(appConfig.name)){appConfig.name=DEFAULT_APP_NAME;}var _appConfig=appConfig,name=_appConfig.name;if(!name||!isString(name)){return Promise.reject(new Error(\"Illegal App name: '\"+name+\"'\"));}if(APP_REGISTRY[name]){return Promise.reject(new Error(\"Firebase App named '\"+name+\"' already exists\"));}if(!isObject(options)){return Promise.reject(new Error(\"firebase.initializeApp(options, <- expects an Object but got '\"+typeof options+\"'\"));}if(!isString(options.apiKey)){return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'apiKey'.\"));}if(!isString(options.appId)){return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'appId'.\"));}if(!isString(options.databaseURL)){return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'databaseURL'.\"));}if(!isString(options.messagingSenderId)){return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'messagingSenderId'.\"));}if(!isString(options.projectId)){return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'projectId'.\"));}if(!isString(options.storageBucket)){return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'storageBucket'.\"));}var app=new FirebaseApp(options,{name:name},false,deleteApp.bind(null,name,true));APP_REGISTRY[name]=app;onAppCreateFn(APP_REGISTRY[name]);return getAppModule().initializeApp(options,{name:name}).then(function(){app._initialized=true;return app;}).catch(function(e){delete APP_REGISTRY[name];throw e;});}export function setLogLevel(logLevel){if(!['error','warn','info','debug','verbose'].includes(logLevel)){throw new Error('LogLevel must be one of \"error\", \"warn\", \"info\", \"debug\", \"verbose\"');}if(isIOS){getAppModule().setLogLevel(logLevel);}}export function deleteApp(name,nativeInitialized){if(name===DEFAULT_APP_NAME&&nativeInitialized){return Promise.reject(new Error('Unable to delete the default native firebase app instance.'));}var app=APP_REGISTRY[name];var nativeModule=getAppModule();return nativeModule.deleteApp(name).then(function(){app._deleted=true;onAppDestroyFn(app);delete APP_REGISTRY[name];});}","map":{"version":3,"names":["isIOS","isNull","isObject","isString","isUndefined","FirebaseApp","DEFAULT_APP_NAME","getAppModule","APP_REGISTRY","onAppCreateFn","onAppDestroyFn","initializedNativeApps","setOnAppCreate","fn","setOnAppDestroy","initializeNativeApps","nativeModule","NATIVE_FIREBASE_APPS","length","i","appConfig","options","name","deleteApp","bind","getApp","app","Error","getApps","Object","values","initializeApp","configOrName","automaticResourceManagement","automaticDataCollectionEnabled","Promise","reject","apiKey","appId","databaseURL","messagingSenderId","projectId","storageBucket","then","_initialized","catch","e","setLogLevel","logLevel","includes","nativeInitialized","_deleted"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/node_modules/@react-native-firebase/app/lib/internal/registry/app.js"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  isIOS,\n  isNull,\n  isObject,\n  isString,\n  isUndefined,\n} from '@react-native-firebase/app/lib/common';\nimport FirebaseApp from '../../FirebaseApp';\nimport { DEFAULT_APP_NAME } from '../constants';\nimport { getAppModule } from './nativeModule';\n\nconst APP_REGISTRY = {};\nlet onAppCreateFn = null;\nlet onAppDestroyFn = null;\nlet initializedNativeApps = false;\n\n/**\n * This was needed to avoid metro require cycles...\n * @param fn\n */\nexport function setOnAppCreate(fn) {\n  onAppCreateFn = fn;\n}\n\n/**\n * This was needed to avoid metro require cycles...\n * @param fn\n */\nexport function setOnAppDestroy(fn) {\n  onAppDestroyFn = fn;\n}\n\n/**\n * Initializes all apps that were created natively (android/ios),\n * e.g. the Default firebase app from plist/json google services file.\n */\nexport function initializeNativeApps() {\n  const nativeModule = getAppModule();\n  const { NATIVE_FIREBASE_APPS } = nativeModule;\n\n  if (NATIVE_FIREBASE_APPS && NATIVE_FIREBASE_APPS.length) {\n    for (let i = 0; i < NATIVE_FIREBASE_APPS.length; i++) {\n      const { appConfig, options } = NATIVE_FIREBASE_APPS[i];\n      const { name } = appConfig;\n      APP_REGISTRY[name] = new FirebaseApp(\n        options,\n        appConfig,\n        true,\n        deleteApp.bind(null, name, true),\n      );\n      onAppCreateFn(APP_REGISTRY[name]);\n    }\n  }\n\n  initializedNativeApps = true;\n}\n\n/**\n * Get an app by name; or the default app.\n *\n * On first call of this method it will initialize any\n * natively created apps in JS. This makes this 'lazy load'.\n *\n * @param name\n */\nexport function getApp(name = DEFAULT_APP_NAME) {\n  if (!initializedNativeApps) {\n    initializeNativeApps();\n  }\n  const app = APP_REGISTRY[name];\n\n  if (!app) {\n    throw new Error(`No Firebase App '${name}' has been created - call firebase.initializeApp()`);\n  }\n\n  return app;\n}\n\n/**\n * Gets all app instances, used for `firebase.apps`\n */\nexport function getApps() {\n  if (!initializedNativeApps) {\n    initializeNativeApps();\n  }\n  return Object.values(APP_REGISTRY);\n}\n\n/**\n *\n * @param options\n * @param configOrName\n */\nexport function initializeApp(options = {}, configOrName) {\n  let appConfig = configOrName;\n\n  if (!isObject(configOrName) || isNull(configOrName)) {\n    appConfig = {\n      name: configOrName,\n      automaticResourceManagement: false,\n      automaticDataCollectionEnabled: true,\n    };\n  }\n\n  if (isUndefined(appConfig.name)) {\n    appConfig.name = DEFAULT_APP_NAME;\n  }\n\n  const { name } = appConfig;\n\n  if (!name || !isString(name)) {\n    return Promise.reject(new Error(`Illegal App name: '${name}'`));\n  }\n\n  if (APP_REGISTRY[name]) {\n    return Promise.reject(new Error(`Firebase App named '${name}' already exists`));\n  }\n\n  // VALIDATE OPTIONS\n  if (!isObject(options)) {\n    return Promise.reject(\n      new Error(`firebase.initializeApp(options, <- expects an Object but got '${typeof options}'`),\n    );\n  }\n\n  if (!isString(options.apiKey)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'apiKey'.\"));\n  }\n\n  if (!isString(options.appId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'appId'.\"));\n  }\n\n  // TODO - make required only if database module exists - init app on native ios&android needs changing also\n  if (!isString(options.databaseURL)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'databaseURL'.\"));\n  }\n\n  // TODO - make required only if messaging/notifications module exists - init app on native ios&android needs changing also\n  if (!isString(options.messagingSenderId)) {\n    return Promise.reject(\n      new Error(\"Missing or invalid FirebaseOptions property 'messagingSenderId'.\"),\n    );\n  }\n\n  if (!isString(options.projectId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'projectId'.\"));\n  }\n\n  // TODO - make required only if database module exists - init app on native ios&android needs changing also\n  if (!isString(options.storageBucket)) {\n    return Promise.reject(\n      new Error(\"Missing or invalid FirebaseOptions property 'storageBucket'.\"),\n    );\n  }\n\n  const app = new FirebaseApp(options, { name }, false, deleteApp.bind(null, name, true));\n\n  // Note these initialization actions with side effects are performed prior to knowledge of\n  // successful initialization in the native code. Native code *may* throw an error.\n  APP_REGISTRY[name] = app;\n  onAppCreateFn(APP_REGISTRY[name]);\n\n  return getAppModule()\n    .initializeApp(options, { name })\n    .then(() => {\n      app._initialized = true;\n      return app;\n    })\n    .catch(e => {\n      // we need to clean the app entry from registry as the app does not actually exist\n      // There are still possible side effects from `onAppCreateFn` to consider but as existing\n      // code may rely on that function running prior to native create, re-ordering it is a semantic change\n      // and will be avoided\n      delete APP_REGISTRY[name];\n\n      // Now allow calling code to handle the initialization issue\n      throw e;\n    });\n}\n\nexport function setLogLevel(logLevel) {\n  if (!['error', 'warn', 'info', 'debug', 'verbose'].includes(logLevel)) {\n    throw new Error('LogLevel must be one of \"error\", \"warn\", \"info\", \"debug\", \"verbose\"');\n  }\n\n  if (isIOS) {\n    getAppModule().setLogLevel(logLevel);\n  }\n}\n\n/**\n *\n */\nexport function deleteApp(name, nativeInitialized) {\n  if (name === DEFAULT_APP_NAME && nativeInitialized) {\n    return Promise.reject(new Error('Unable to delete the default native firebase app instance.'));\n  }\n\n  const app = APP_REGISTRY[name];\n\n  const nativeModule = getAppModule();\n\n  return nativeModule.deleteApp(name).then(() => {\n    app._deleted = true;\n    onAppDestroyFn(app);\n    delete APP_REGISTRY[name];\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}