{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{NativeWindStyleSheet as _NativeWindStyleSheet}from\"nativewind\";import{StyledComponent as _StyledComponent}from\"nativewind\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import Image from\"react-native-web/dist/exports/Image\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TextInput from\"react-native-web/dist/exports/TextInput\";import{useContext,useEffect,useState}from\"react\";import{ColorPalette}from\"../../../theme/colors\";import Images from\"../../../theme/images\";import EmptyView from\"../../components/EmptyView\";import PageHeader from\"../../components/global/header\";import LoadingOverlay from\"../../components/LoadingOverlay\";import SafeArea from\"../../components/global/safeArea\";import useLiked from\"../../../hooks/useLiked\";import{useToast}from\"native-base\";import ToastDialog from\"../../components/global/toast\";import FriendCard from\"../../components/friendCard\";import{useNavigation}from\"@react-navigation/native\";import{createRoom}from\"../../../controller/message\";import{UserContext}from\"../../../context/user\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LikedScreen=function LikedScreen(){var _useContext=useContext(UserContext),profile=_useContext.profile;var toast=useToast();var navigation=useNavigation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filteredUsers=_useState2[0],setFilteredUsers=_useState2[1];var _useLiked=useLiked(function(error){toast.show({render:function render(){return _jsx(ToastDialog,{message:error});}});}),likedUsers=_useLiked.likedUsers,loading=_useLiked.loading;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),keyword=_useState4[0],setKeyword=_useState4[1];var onSearchUser=function onSearchUser(text){setKeyword(text);};var onCardClick=function(){var _ref=_asyncToGenerator(function*(user){if(!profile)return;var roomId=yield createRoom(profile,user,function(error){toast.show({render:function render(){return _jsx(ToastDialog,{message:error});}});});navigation.navigate(\"Chat\",{screen:\"room\",params:{id:roomId,name:user.name,profilePic:user.profilePicture}});});return function onCardClick(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(keyword){var filtered=likedUsers.filter(function(user){var _user$name;return(_user$name=user.name)==null?void 0:_user$name.toLowerCase().includes(keyword.toLowerCase());});setFilteredUsers(filtered);}else{setFilteredUsers(likedUsers);}if(likedUsers.length===0){setFilteredUsers([]);}},[likedUsers,keyword]);return _jsxs(SafeArea,{children:[_jsx(PageHeader,{}),_jsxs(View,{style:styles.container,children:[_jsxs(_StyledComponent,{style:styles.searchWrapper,className:\"bg-secondary\",component:View,children:[_jsx(Image,{style:styles.searchIcon,source:Images.icon_search}),_jsx(_StyledComponent,{style:styles.searchText,className:\"text-onSecondary\",placeholder:'Search',placeholderTextColor:ColorPalette.SOFT_MAGENTA,value:keyword,onChangeText:onSearchUser,component:TextInput})]}),_jsx(_StyledComponent,{style:styles.bannerText,className:\"text-onSecondary\",component:Text,children:\"Liked People\"}),filteredUsers&&filteredUsers.length>0?_jsx(FlatList,{style:styles.listView,data:filteredUsers,keyExtractor:function keyExtractor(_item,index){return index.toString();},ListFooterComponent:function ListFooterComponent(){return _jsx(View,{style:{height:20}});},renderItem:function renderItem(_ref2){var item=_ref2.item;return _jsx(FriendCard,{profilePicture:item.profilePicture,personName:item.name,onPress:function onPress(){return onCardClick(item);}});}}):_jsx(EmptyView,{title:'No liked people.'}),loading&&_jsx(LoadingOverlay,{})]})]});};export default LikedScreen;var styles=StyleSheet.create({container:{flex:1,paddingHorizontal:20},searchWrapper:{marginVertical:20,flexDirection:'row',alignItems:'center',borderRadius:20,borderWidth:1,borderColor:'white',paddingHorizontal:15,paddingVertical:5},searchIcon:{width:20,height:20},searchText:{marginLeft:15,width:'100%',fontSize:20},bannerText:{fontWeight:\"bold\",fontSize:22,marginBottom:10},listView:{flex:1}});_NativeWindStyleSheet.create({styles:{\"container\":{\"width\":\"100%\"},\"container@0\":{\"maxWidth\":640},\"container@1\":{\"maxWidth\":768},\"container@2\":{\"maxWidth\":1024},\"container@3\":{\"maxWidth\":1280},\"container@4\":{\"maxWidth\":1536},\"flex\":{\"display\":\"flex\"},\"bg-secondary\":{\"backgroundColor\":\"#63458A\"},\"text-onSecondary\":{\"color\":\"#FEE1FF\"}},atRules:{\"container\":[[[\"media\",\"(min-width: 640px)\"]],[[\"media\",\"(min-width: 768px)\"]],[[\"media\",\"(min-width: 1024px)\"]],[[\"media\",\"(min-width: 1280px)\"]],[[\"media\",\"(min-width: 1536px)\"]]]},topics:{\"container\":[\"width\"]}});","map":{"version":3,"names":["useContext","useEffect","useState","ColorPalette","Images","EmptyView","PageHeader","LoadingOverlay","SafeArea","useLiked","useToast","ToastDialog","FriendCard","useNavigation","createRoom","UserContext","LikedScreen","profile","toast","navigation","filteredUsers","setFilteredUsers","error","show","render","likedUsers","loading","keyword","setKeyword","onSearchUser","text","onCardClick","user","roomId","navigate","screen","params","id","name","profilePic","profilePicture","filtered","filter","toLowerCase","includes","length","styles","container","searchWrapper","searchIcon","icon_search","searchText","SOFT_MAGENTA","bannerText","listView","_item","index","toString","height","item","StyleSheet","create","flex","paddingHorizontal","marginVertical","flexDirection","alignItems","borderRadius","borderWidth","borderColor","paddingVertical","width","marginLeft","fontSize","fontWeight","marginBottom"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/frontend/screens/home/LikedScreen.tsx"],"sourcesContent":["import {\n    StyleSheet, Text, \n    View, Image, \n    FlatList, TextInput\n} from 'react-native'\nimport { useContext, useEffect, useState } from \"react\";\nimport { ColorPalette } from \"@app/theme/colors\";\nimport Images from \"@app/theme/images\";\nimport EmptyView from \"@app/frontend/components/EmptyView\";\nimport PageHeader from '@app/frontend/components/global/header';\nimport LoadingOverlay from '@app/frontend/components/LoadingOverlay';\nimport SafeArea from '@app/frontend/components/global/safeArea';\nimport useLiked from '@app/hooks/useLiked';\nimport {useToast} from \"native-base\";\nimport ToastDialog from '@app/frontend/components/global/toast';\nimport type { User } from \"@app/shared/interfaces/user\";\nimport FriendCard from '@app/frontend/components/friendCard';\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"@app/frontend/navigation/main\";\nimport { createRoom } from \"@app/controller/message\";\nimport {UserContext} from \"@app/context/user\";\n\ntype NavigationProps = NativeStackNavigationProp<RootStackParamList, \"Like\">;\n\nconst LikedScreen = () => {\n    const {profile} = useContext(UserContext)\n    const toast = useToast();\n    const navigation = useNavigation<NavigationProps>();\n    const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\n    const {likedUsers, loading} = useLiked(\n        (error) => {\n            toast.show({\n                render: () => <ToastDialog message={error} />\n            })\n        }\n    );\n    const [keyword, setKeyword] = useState('');\n\n    const onSearchUser = (text: string) => {\n        setKeyword(text);\n    }\n\n    const onCardClick = async (user: User) =>  {\n        if (!profile) return;\n        const roomId = await createRoom(profile, user, (error) => {\n            toast.show({\n                render: () => <ToastDialog message={error} />\n            })\n        });\n        navigation.navigate(\"Chat\", {\n            screen: \"room\",\n            params: {\n                id: roomId,\n                name: user.name!,\n                profilePic: user.profilePicture!\n            }\n        });\n    }\n\n    useEffect(()=> {\n        if (keyword) {\n            const filtered: User[] = likedUsers.filter((user: User) => {\n                return user.name?.toLowerCase().includes(keyword.toLowerCase());\n            });\n            setFilteredUsers(filtered);\n        } else {\n            setFilteredUsers(likedUsers);\n        }\n\n        if (likedUsers.length === 0) {\n            setFilteredUsers([]);\n        }\n    }, [likedUsers, keyword]);\n\n    return (\n        <SafeArea>\n            <PageHeader/>\n            <View style={styles.container}>\n                <View style={styles.searchWrapper} className=\"bg-secondary\">\n                    <Image style={styles.searchIcon} source={Images.icon_search} />\n                    <TextInput\n                        style={styles.searchText}\n                        className=\"text-onSecondary\"\n                        placeholder={'Search'}\n                        placeholderTextColor={ColorPalette.SOFT_MAGENTA}\n                        value={keyword}\n                        onChangeText = {onSearchUser}\n                    />\n                </View>\n                <Text style={styles.bannerText} className=\"text-onSecondary\">Liked People</Text>\n                {filteredUsers && filteredUsers.length > 0 ? (\n                    <FlatList\n                        style={styles.listView}\n                        data={filteredUsers}\n                        keyExtractor={(_item, index) => index.toString()}\n                        ListFooterComponent={() => <View style={{ height: 20 }} />}\n                        renderItem={({ item }) => {\n                            return (\n                                <FriendCard\n                                    profilePicture={item.profilePicture!}\n                                    personName={item.name!}\n                                    onPress={() => onCardClick(item)}\n                                />\n                            );\n                        }}\n                    />\n                ) : (\n                    <EmptyView title={'No liked people.'} />\n                )}\n                {loading && <LoadingOverlay/>}\n            </View>\n        </SafeArea>\n    )\n}\n\nexport default LikedScreen;\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingHorizontal: 20\n    },\n    searchWrapper: {\n        marginVertical: 20,\n        flexDirection: 'row',\n        alignItems: 'center',\n        borderRadius: 20,\n        borderWidth: 1,\n        borderColor: 'white',\n        paddingHorizontal: 15,\n        paddingVertical: 5,\n    },\n    searchIcon: {\n        width: 20,\n        height: 20\n    },\n    searchText: {\n        marginLeft: 15,\n        width: '100%',\n        fontSize: 20\n    },\n    bannerText: {\n        fontWeight: \"bold\",\n        fontSize: 22,\n        marginBottom: 10\n    },\n    listView: {\n        flex: 1,\n    },\n    \n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}