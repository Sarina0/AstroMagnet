{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";var $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY=7000;var $319e236875307eab$var$liveAnnouncer=null;function $319e236875307eab$export$a9b970dcc4ae71a9(message){var assertiveness=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'assertive';var timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:$319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY;if(!$319e236875307eab$var$liveAnnouncer)$319e236875307eab$var$liveAnnouncer=new $319e236875307eab$var$LiveAnnouncer();$319e236875307eab$var$liveAnnouncer.announce(message,assertiveness,timeout);}function $319e236875307eab$export$d10ae4f68404609a(assertiveness){if($319e236875307eab$var$liveAnnouncer)$319e236875307eab$var$liveAnnouncer.clear(assertiveness);}function $319e236875307eab$export$d8686216b8b81b2f(){if($319e236875307eab$var$liveAnnouncer){$319e236875307eab$var$liveAnnouncer.destroy();$319e236875307eab$var$liveAnnouncer=null;}}var $319e236875307eab$var$LiveAnnouncer=function(){function $319e236875307eab$var$LiveAnnouncer(){_classCallCheck(this,$319e236875307eab$var$LiveAnnouncer);this.node=document.createElement('div');this.node.dataset.liveAnnouncer='true';Object.assign(this.node.style,{border:0,clip:'rect(0 0 0 0)',clipPath:'inset(50%)',height:1,margin:'0 -1px -1px 0',overflow:'hidden',padding:0,position:'absolute',width:1,whiteSpace:'nowrap'});this.assertiveLog=this.createLog('assertive');this.node.appendChild(this.assertiveLog);this.politeLog=this.createLog('polite');this.node.appendChild(this.politeLog);document.body.prepend(this.node);}_createClass($319e236875307eab$var$LiveAnnouncer,[{key:\"createLog\",value:function createLog(ariaLive){var node=document.createElement('div');node.setAttribute('role','log');node.setAttribute('aria-live',ariaLive);node.setAttribute('aria-relevant','additions');return node;}},{key:\"destroy\",value:function destroy(){if(!this.node)return;document.body.removeChild(this.node);this.node=null;}},{key:\"announce\",value:function announce(message){var assertiveness=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'assertive';var timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:$319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY;if(!this.node)return;var node=document.createElement('div');node.textContent=message;if(assertiveness==='assertive')this.assertiveLog.appendChild(node);else this.politeLog.appendChild(node);if(message!=='')setTimeout(function(){node.remove();},timeout);}},{key:\"clear\",value:function clear(assertiveness){if(!this.node)return;if(!assertiveness||assertiveness==='assertive')this.assertiveLog.innerHTML='';if(!assertiveness||assertiveness==='polite')this.politeLog.innerHTML='';}}]);return $319e236875307eab$var$LiveAnnouncer;}();export{$319e236875307eab$export$a9b970dcc4ae71a9 as announce,$319e236875307eab$export$d10ae4f68404609a as clearAnnouncer,$319e236875307eab$export$d8686216b8b81b2f as destroyAnnouncer};","map":{"version":3,"sources":["packages/@react-aria/live-announcer/src/LiveAnnouncer.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\ntype Assertiveness = 'assertive' | 'polite';\n\n/* Inspired by https://github.com/AlmeroSteyn/react-aria-live */\nconst LIVEREGION_TIMEOUT_DELAY = 7000;\n\nlet liveAnnouncer: LiveAnnouncer = null;\n\n/**\n * Announces the message using screen reader technology.\n */\nexport function announce(\n  message: string,\n  assertiveness: Assertiveness = 'assertive',\n  timeout = LIVEREGION_TIMEOUT_DELAY\n) {\n  if (!liveAnnouncer) {\n    liveAnnouncer = new LiveAnnouncer();\n  }\n\n  liveAnnouncer.announce(message, assertiveness, timeout);\n}\n\n/**\n * Stops all queued announcements.\n */\nexport function clearAnnouncer(assertiveness: Assertiveness) {\n  if (liveAnnouncer) {\n    liveAnnouncer.clear(assertiveness);\n  }\n}\n\n/**\n * Removes the announcer from the DOM.\n */\nexport function destroyAnnouncer() {\n  if (liveAnnouncer) {\n    liveAnnouncer.destroy();\n    liveAnnouncer = null;\n  }\n}\n\n// LiveAnnouncer is implemented using vanilla DOM, not React. That's because as of React 18\n// ReactDOM.render is deprecated, and the replacement, ReactDOM.createRoot is moved into a\n// subpath import `react-dom/client`. That makes it hard for us to support multiple React versions.\n// As a global API, we can't use portals without introducing a breaking API change. LiveAnnouncer\n// is simple enough to implement without React, so that's what we do here.\n// See this discussion for more details: https://github.com/reactwg/react-18/discussions/125#discussioncomment-2382638\nclass LiveAnnouncer {\n  node: HTMLElement;\n  assertiveLog: HTMLElement;\n  politeLog: HTMLElement;\n\n  constructor() {\n    this.node = document.createElement('div');\n    this.node.dataset.liveAnnouncer = 'true';\n    // copied from VisuallyHidden\n    Object.assign(this.node.style, {\n      border: 0,\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      height: 1,\n      margin: '0 -1px -1px 0',\n      overflow: 'hidden',\n      padding: 0,\n      position: 'absolute',\n      width: 1,\n      whiteSpace: 'nowrap'\n    });\n\n    this.assertiveLog = this.createLog('assertive');\n    this.node.appendChild(this.assertiveLog);\n\n    this.politeLog = this.createLog('polite');\n    this.node.appendChild(this.politeLog);\n\n    document.body.prepend(this.node);\n  }\n\n  createLog(ariaLive: string) {\n    let node = document.createElement('div');\n    node.setAttribute('role', 'log');\n    node.setAttribute('aria-live', ariaLive);\n    node.setAttribute('aria-relevant', 'additions');\n    return node;\n  }\n\n  destroy() {\n    if (!this.node) {\n      return;\n    }\n\n    document.body.removeChild(this.node);\n    this.node = null;\n  }\n\n  announce(message: string, assertiveness = 'assertive', timeout = LIVEREGION_TIMEOUT_DELAY) {\n    if (!this.node) {\n      return;\n    }\n\n    let node = document.createElement('div');\n    node.textContent = message;\n\n    if (assertiveness === 'assertive') {\n      this.assertiveLog.appendChild(node);\n    } else {\n      this.politeLog.appendChild(node);\n    }\n\n    if (message !== '') {\n      setTimeout(() => {\n        node.remove();\n      }, timeout);\n    }\n  }\n\n  clear(assertiveness: Assertiveness) {\n    if (!this.node) {\n      return;\n    }\n\n    if (!assertiveness || assertiveness === 'assertive') {\n      this.assertiveLog.innerHTML = '';\n    }\n\n    if (!assertiveness || assertiveness === 'polite') {\n      this.politeLog.innerHTML = '';\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}