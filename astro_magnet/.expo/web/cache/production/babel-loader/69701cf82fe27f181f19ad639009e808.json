{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{NativeWindStyleSheet as _NativeWindStyleSheet}from\"nativewind\";import{StyledComponent as _StyledComponent}from\"nativewind\";import React from'react';import*as ImagePicker from'expo-image-picker';import{Pressable,Box,Text,Icon}from\"native-base\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{MaterialCommunityIcons}from\"@expo/vector-icons\";import FastImage from\"react-native-fast-image\";import Image from\"./image\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ImagePickerComponent(props){function getImageSrc(){var _props$fallback;if(props.value){return props.value;}return(_props$fallback=props.fallback)!=null?_props$fallback:'https://via.placeholder.com/150';}function pickImage(){return _pickImage.apply(this,arguments);}function _pickImage(){_pickImage=_asyncToGenerator(function*(){var result=yield ImagePicker.launchImageLibraryAsync({mediaTypes:ImagePicker.MediaTypeOptions.All,allowsEditing:true,aspect:[4,3],quality:1});if(!result.canceled){props.onChange(result.assets[0].uri);}});return _pickImage.apply(this,arguments);};var _Dimensions$get=Dimensions.get('window'),width=_Dimensions$get.width;return _jsxs(_Fragment,{children:[props.label&&_jsx(Text,{color:\"onSecondary\",my:2,fontSize:20,fontWeight:\"bold\",style:props.labelStyle,children:props.label}),_jsxs(Box,{flex:1,justifyContent:\"center\",alignItems:\"center\",style:props.style,width:width/2.25,height:width/2.25,mx:props.mode===\"image\"?0:\"auto\",children:[_jsx(Pressable,{position:\"absolute\",alignItems:\"center\",justifyContent:\"center\",top:-8,right:-12,zIndex:100,bg:\"tertiary\",height:7,width:7,p:2,rounded:\"full\",onPress:pickImage,children:_jsx(Icon,{as:_jsx(MaterialCommunityIcons,{name:\"pencil\"}),color:\"onSecondary\"})}),_jsx(_StyledComponent,{flex:1,alignItems:\"center\",justifyContent:\"center\",rounded:props.mode===\"avatar\"?\"full\":\"md\",bg:\"secondary\",overflow:\"hidden\",className:\"w-full h-full\",component:Box,children:_jsx(Image,{source:{uri:getImageSrc(),priority:FastImage.priority.normal,cache:FastImage.cacheControl.immutable},style:{width:'100%',height:'100%'},resizeMode:FastImage.resizeMode.cover})})]})]});}_NativeWindStyleSheet.create({styles:{\"container\":{\"width\":\"100%\"},\"container@0\":{\"maxWidth\":640},\"container@1\":{\"maxWidth\":768},\"container@2\":{\"maxWidth\":1024},\"container@3\":{\"maxWidth\":1280},\"container@4\":{\"maxWidth\":1536},\"absolute\":{\"position\":\"absolute\"},\"flex\":{\"display\":\"flex\"},\"hidden\":{\"display\":\"none\"},\"h-full\":{\"height\":\"100%\"},\"w-full\":{\"width\":\"100%\"},\"rounded\":{\"borderTopLeftRadius\":4,\"borderTopRightRadius\":4,\"borderBottomRightRadius\":4,\"borderBottomLeftRadius\":4}},atRules:{\"container\":[[[\"media\",\"(min-width: 640px)\"]],[[\"media\",\"(min-width: 768px)\"]],[[\"media\",\"(min-width: 1024px)\"]],[[\"media\",\"(min-width: 1280px)\"]],[[\"media\",\"(min-width: 1536px)\"]]]},topics:{\"container\":[\"width\"]}});","map":{"version":3,"names":["React","ImagePicker","Pressable","Box","Text","Icon","MaterialCommunityIcons","FastImage","Image","ImagePickerComponent","props","getImageSrc","value","fallback","pickImage","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","canceled","onChange","assets","uri","Dimensions","get","width","label","labelStyle","style","mode","priority","normal","cache","cacheControl","immutable","height","resizeMode","cover"],"sources":["/Users/sonminhnguyen/Documents/programming/react-native/school/astro_magnet_initial/astro_magnet/src/frontend/components/global/imagePicker.tsx"],"sourcesContent":["import React from 'react';\nimport * as ImagePicker from 'expo-image-picker';\nimport { Pressable, Box, Text, Icon } from \"native-base\";\nimport { ViewStyle, Dimensions } from 'react-native';\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport FastImage from \"react-native-fast-image\";\nimport Image from \"@app/frontend/components/global/image\";\n\ninterface Props {\n    label?: string;\n    value:  string | null | undefined;\n    onChange: (value: string | null | undefined) => void;\n    fallback?: string;\n    style?: ViewStyle\n    labelStyle?: ViewStyle\n    mode: \"avatar\" | \"image\"\n}\n\n/**\n * image picker for selecting an image from the device\n * @prop {string | undefined} label - label of the image picker\n * @prop {string | null | undefined} value - uri of the selected image\n * @prop {(value: string | null | undefined) => void} onChange - function to call when the image changes\n * @prop {string | undefined} fallback - uri of the fallback image when no image is selected(value is null or undefined)\n * @prop {ViewStyle | undefined} style - extra style for the image picker container\n * @prop {ViewStyle | undefined} labelStyle - extra style for the label\n * @prop {\"avatar\" | \"image\"} mode - mode of the image picker (2 options: \"avatar\" or \"image\")\n * @returns \n */\nexport default function ImagePickerComponent(props: Props) {\n\n  /**\n   * get selected image uri\n   * @returns {string} - image uri\n   */\n  function getImageSrc(): string {\n\n    //if image is selected\n    if (props.value) {\n\n      //return image uri\n      return props.value;\n    }\n\n    //if no image is selected return fallback uri\n    return props.fallback ?? 'https://via.placeholder.com/150';\n  }\n\n  /**\n   * open the picker\n   */\n  async function pickImage(): Promise<void> {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    if (!result.canceled) {\n        props.onChange(result.assets[0].uri);\n    }\n  };\n\n  const {width} = Dimensions.get('window');\n\n  return (\n    <>\n        {props.label && \n            <Text\n                color=\"onSecondary\"\n                my={2}\n                fontSize={20}\n                fontWeight=\"bold\"\n                style={props.labelStyle}\n            >\n                {props.label}\n            </Text>}\n        <Box \n            flex={1}\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            style={props.style}\n            width={width/2.25}\n            height={width/2.25}\n            mx={props.mode === \"image\" ? 0 : \"auto\"}\n        >\n            <Pressable\n                position=\"absolute\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n                top={-8} right={-12}\n                zIndex={100} bg=\"tertiary\"\n                height={7} width={7}\n                p={2} rounded=\"full\"\n                onPress={pickImage}\n            >\n                <Icon\n                    as={<MaterialCommunityIcons name=\"pencil\" />}\n                    color=\"onSecondary\"\n                />\n            </Pressable>\n            <Box\n                flex={1}\n                alignItems=\"center\"\n                justifyContent=\"center\"\n                rounded={props.mode === \"avatar\" ? \"full\" : \"md\"}\n                bg=\"secondary\"\n                overflow=\"hidden\"\n                className=\"w-full h-full\"\n            >\n                <Image\n                    source={{ \n                        uri: getImageSrc(),\n                        priority: FastImage.priority.normal,\n                        cache: FastImage.cacheControl.immutable\n                    }}\n                    style={{ \n                        width: '100%', \n                        height: '100%',\n                    }}\n                    resizeMode={FastImage.resizeMode.cover}\n                />   \n            </Box>\n        </Box>\n    </>\n    \n  );\n}\n"],"mappings":"yMAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAO,GAAKC,YAAW,KAAM,mBAAmB,CAChD,OAASC,SAAS,CAAEC,GAAG,CAAEC,IAAI,CAAEC,IAAI,KAAQ,aAAa,CAAC,iEAEzD,OAASC,sBAAsB,KAAQ,oBAAoB,CAC3D,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,MAAK,eAA8C,6IAuB1D,cAAe,SAASC,qBAAoB,CAACC,KAAY,CAAE,CAMzD,QAASC,YAAW,EAAW,qBAG7B,GAAID,KAAK,CAACE,KAAK,CAAE,CAGf,MAAOF,MAAK,CAACE,KAAK,CACpB,CAGA,uBAAOF,KAAK,CAACG,QAAQ,wBAAI,iCAAiC,CAC5D,CAAC,QAKcC,UAAS,+FAAxB,WAA0C,CACxC,GAAIC,OAAM,MAASd,YAAW,CAACe,uBAAuB,CAAC,CACrDC,UAAU,CAAEhB,WAAW,CAACiB,gBAAgB,CAACC,GAAG,CAC5CC,aAAa,CAAE,IAAI,CACnBC,MAAM,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CACdC,OAAO,CAAE,CACX,CAAC,CAAC,CAEF,GAAI,CAACP,MAAM,CAACQ,QAAQ,CAAE,CAClBb,KAAK,CAACc,QAAQ,CAACT,MAAM,CAACU,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CACxC,CACF,CAAC,4CAED,oBAAgBC,UAAU,CAACC,GAAG,CAAC,QAAQ,CAAC,CAAjCC,KAAK,iBAALA,KAAK,CAEZ,MACE,4BACKnB,KAAK,CAACoB,KAAK,EACR,KAAC,IAAI,EACD,KAAK,CAAC,aAAa,CACnB,EAAE,CAAE,CAAE,CACN,QAAQ,CAAE,EAAG,CACb,UAAU,CAAC,MAAM,CACjB,KAAK,CAAEpB,KAAK,CAACqB,UAAW,UAEvBrB,KAAK,CAACoB,KAAK,EACT,CACX,MAAC,GAAG,EACA,IAAI,CAAE,CAAE,CACR,cAAc,CAAC,QAAQ,CACvB,UAAU,CAAC,QAAQ,CACnB,KAAK,CAAEpB,KAAK,CAACsB,KAAM,CACnB,KAAK,CAAEH,KAAK,CAAC,IAAK,CAClB,MAAM,CAAEA,KAAK,CAAC,IAAK,CACnB,EAAE,CAAEnB,KAAK,CAACuB,IAAI,GAAK,OAAO,CAAG,CAAC,CAAG,MAAO,WAExC,KAAC,SAAS,EACN,QAAQ,CAAC,UAAU,CACnB,UAAU,CAAC,QAAQ,CACnB,cAAc,CAAC,QAAQ,CACvB,GAAG,CAAE,CAAC,CAAE,CAAC,KAAK,CAAE,CAAC,EAAG,CACpB,MAAM,CAAE,GAAI,CAAC,EAAE,CAAC,UAAU,CAC1B,MAAM,CAAE,CAAE,CAAC,KAAK,CAAE,CAAE,CACpB,CAAC,CAAE,CAAE,CAAC,OAAO,CAAC,MAAM,CACpB,OAAO,CAAEnB,SAAU,UAEnB,KAAC,IAAI,EACD,EAAE,CAAE,KAAC,sBAAsB,EAAC,IAAI,CAAC,QAAQ,EAAI,CAC7C,KAAK,CAAC,aAAa,EACrB,EACM,wBAER,IAAI,CAAE,CAAE,CACR,UAAU,CAAC,QAAQ,CACnB,cAAc,CAAC,QAAQ,CACvB,OAAO,CAAEJ,KAAK,CAACuB,IAAI,GAAK,QAAQ,CAAG,MAAM,CAAG,IAAK,CACjD,EAAE,CAAC,WAAW,CACd,QAAQ,CAAC,QAAQ,CACjB,SAAS,CAAC,eAAe,wBAEzB,KAAC,KAAK,EACF,MAAM,CAAE,CACJP,GAAG,CAAEf,WAAW,EAAE,CAClBuB,QAAQ,CAAE3B,SAAS,CAAC2B,QAAQ,CAACC,MAAM,CACnCC,KAAK,CAAE7B,SAAS,CAAC8B,YAAY,CAACC,SAClC,CAAE,CACF,KAAK,CAAE,CACHT,KAAK,CAAE,MAAM,CACbU,MAAM,CAAE,MACZ,CAAE,CACF,UAAU,CAAEhC,SAAS,CAACiC,UAAU,CAACC,KAAM,EACzC,KAEJ,GACP,CAGP,CAAC"},"metadata":{},"sourceType":"module"}